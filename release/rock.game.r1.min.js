rock.namespace("rock.game");rock.game.constants={GROUP_MODEL_TYPE:"GROUP_MODEL_TYPE",NO_LIGHTING_NEEDED_TYPE:"NO_LIGHTING_NEEDED_TYPE",DIRECTIONAL_LIGHTING_TYPE:"DIRECTIONAL_LIGHTING_TYPE",POINT_LIGHTING_TYPE:"POINT_LIGHTING_TYPE",SPOTLIGHT_LIGHTING_TYPE:"SPOTLIGHT_LIGHTING_TYPE",COLOR_MODEL_TYPE:"COLOR_MODEL_TYPE",TEXTURE_MODEL_TYPE:"TEXTURE_MODEL_TYPE",PHONG_MODEL_TYPE:"PHONG_MODEL_TYPE",PHONG_TEXTURE_MODEL_TYPE:"PHONG_TEXTURE_MODEL_TYPE",ROCK_BASIC_RENDERER_CONTEXT_ID:"ROCK_BASIC_RENDERER_CONTEXT_ID"};rock.namespace("rock.game.graphics.lighting");rock.game.graphics.lighting.Light=function(){this.isPositionInCameraSpace=!0;this.isPositionAVector=!1;this.position=new rock.geometry.Point3(0,0,0);this.ambient=new rock.graphics.Color(0,0,0);this.diffuse=new rock.graphics.Color(0,0,0);this.specular=new rock.graphics.Color(0,0,0)};rock.game.graphics.lighting.Light.prototype.getIsPositionInCameraSpace=function(){return this.isPositionInCameraSpace};
rock.game.graphics.lighting.Light.prototype.setIsPositionInCameraSpace=function(a){this.isPositionInCameraSpace=a};rock.game.graphics.lighting.Light.prototype.getIsPositionAVector=function(){return this.isPositionAVector};rock.game.graphics.lighting.Light.prototype.setIsPositionAVector=function(a){this.isPositionAVector=a};rock.game.graphics.lighting.Light.prototype.setPosition=function(a,b,c){var d=this.position;d.setX(a);d.setY(b);d.setZ(c)};
rock.game.graphics.lighting.Light.prototype.getPosition=function(){return this.position};rock.game.graphics.lighting.Light.prototype.setAmbient=function(a,b,c){var d=this.ambient;d.setRed(a);d.setGreen(b);d.setBlue(c)};rock.game.graphics.lighting.Light.prototype.getAmbient=function(){return this.ambient};rock.game.graphics.lighting.Light.prototype.setDiffuse=function(a,b,c){var d=this.diffuse;d.setRed(a);d.setGreen(b);d.setBlue(c)};rock.game.graphics.lighting.Light.prototype.getDiffuse=function(){return this.diffuse};
rock.game.graphics.lighting.Light.prototype.setSpecular=function(a,b,c){var d=this.specular;d.setRed(a);d.setGreen(b);d.setBlue(c)};rock.game.graphics.lighting.Light.prototype.getSpecular=function(){return this.specular};rock.namespace("rock.game.graphics.lighting");rock.game.graphics.lighting.AttenuationLight=function(){rock.super_(this);this.exponentialAttenuation=this.linearAttenuation=this.constantAttenuation=0};rock.extends_(rock.game.graphics.lighting.AttenuationLight,rock.game.graphics.lighting.Light);rock.game.graphics.lighting.AttenuationLight.prototype.getConstantAttenuation=function(){return this.constantAttenuation};
rock.game.graphics.lighting.AttenuationLight.prototype.setConstantAttenuation=function(a){this.constantAttenuation=a};rock.game.graphics.lighting.AttenuationLight.prototype.getLinearAttenuation=function(){return this.linearAttenuation};rock.game.graphics.lighting.AttenuationLight.prototype.setLinearAttenuation=function(a){this.linearAttenuation=a};rock.game.graphics.lighting.AttenuationLight.prototype.getExponentialAttenuation=function(){return this.exponentialAttenuation};
rock.game.graphics.lighting.AttenuationLight.prototype.setExponentialAttenuation=function(a){this.exponentialAttenuation=a};rock.namespace("rock.game.graphics.lighting");rock.game.graphics.lighting.DirectionalLight=function(){rock.super_(this);this.isPositionAVector=!0};rock.extends_(rock.game.graphics.lighting.DirectionalLight,rock.game.graphics.lighting.Light);rock.namespace("rock.game.graphics.lighting");rock.game.graphics.lighting.PointLight=function(){rock.super_(this)};rock.extends_(rock.game.graphics.lighting.PointLight,rock.game.graphics.lighting.AttenuationLight);rock.namespace("rock.game.graphics.lighting");rock.game.graphics.lighting.SpotlightLight=function(){rock.super_(this);this.coneDirection=this.coneAngle=null};rock.extends_(rock.game.graphics.lighting.SpotlightLight,rock.game.graphics.lighting.AttenuationLight);rock.game.graphics.lighting.SpotlightLight.prototype.getConeAngle=function(){return this.coneAngle};rock.game.graphics.lighting.SpotlightLight.prototype.setConeAngle=function(a){this.coneAngle=a};
rock.game.graphics.lighting.SpotlightLight.prototype.getConeDirection=function(){return this.coneDirection};rock.game.graphics.lighting.SpotlightLight.prototype.setConeDirection=function(a,b,c){var d=new rock.geometry.Vector3;d.setX(a);d.setY(b);d.setZ(c);this.coneDirection=d};rock.namespace("rock.game.graphics.model.mesh");rock.game.graphics.model.mesh.Mesh=function(){this.vertices=[];this.indexes=[];this.BBOX=null};rock.game.graphics.model.mesh.Mesh.prototype.loadFromJSON=function(a){this.setVertices(a.vertices);this.setIndexes(a.indexes);a=a.BBOX;a=new rock.geometry.BBOX(a[0],a[1],a[2],a[3],a[4],a[5]);this.setBBOX(a)};rock.game.graphics.model.mesh.Mesh.prototype.getVertices=function(){return this.vertices};
rock.game.graphics.model.mesh.Mesh.prototype.setVertices=function(a){this.vertices=a};rock.game.graphics.model.mesh.Mesh.prototype.getIndexes=function(){return this.indexes};rock.game.graphics.model.mesh.Mesh.prototype.setIndexes=function(a){this.indexes=a};rock.game.graphics.model.mesh.Mesh.prototype.getBBOX=function(){return this.BBOX};rock.game.graphics.model.mesh.Mesh.prototype.setBBOX=function(a){this.BBOX=a};rock.game.graphics.model.mesh.Mesh.prototype.getCenter=function(){return this.BBOX.getCenter()};
rock.game.graphics.model.mesh.Mesh.prototype.getAsWireframeMesh=function(){var a=this.clone(),b=this.indexes,c=b.length,d=[],e,g,f,h;for(e=0;e<c;e+=3)g=b[e],f=b[e+1],h=b[e+2],d.push(g),d.push(f),d.push(f),d.push(h),d.push(h),d.push(g);a.setIndexes(d);return a};rock.game.graphics.model.mesh.Mesh.prototype.getBBOXAsMesh=function(){return rock.game.graphics.model.mesh.Mesh.createMeshFromBBOX(this.BBOX)};
rock.game.graphics.model.mesh.Mesh.createMeshFromBBOX=function(a){var b=new rock.game.graphics.model.mesh.Mesh,c=a.getXMin(),d=a.getXMax(),e=a.getYMin(),g=a.getYMax(),f=a.getZMin(),h=a.getZMax(),j=[];j.push(c,e,f);j.push(c,e,h);j.push(d,e,h);j.push(d,e,f);j.push(c,g,f);j.push(c,g,h);j.push(d,g,h);j.push(d,g,f);c=[];c.push(0,1);c.push(1,2);c.push(2,3);c.push(3,0);c.push(4,5);c.push(5,6);c.push(6,7);c.push(7,4);c.push(0,4);c.push(1,5);c.push(2,6);c.push(3,7);b.setVertices(j);b.setIndexes(c);b.setBBOX(a.clone());
return b};rock.game.graphics.model.mesh.Mesh.prototype.computeBBOX=function(){var a=this.vertices,b=a.length;if(0!=b){var c=a[0],d=a[0],e=a[1],g=a[1],f=a[2],h=a[2],j,k,l,m;for(j=3;j<b;j+=3)k=a[j],l=a[j+1],m=a[j+2],k<c&&(c=k),k>d&&(d=k),l<e&&(e=l),l>g&&(g=l),m<f&&(f=m),m>h&&(h=m);this.BBOX=new rock.geometry.BBOX(c,d,e,g,f,h)}};
rock.game.graphics.model.mesh.Mesh.prototype.clone=function(){var a=new rock.game.graphics.model.mesh.Mesh;a.setVertices(rock.util.JsUtils.cloneArray(this.getVertices()));a.setIndexes(rock.util.JsUtils.cloneArray(this.getIndexes()));a.setBBOX(this.getBBOX().clone());return a};rock.namespace("rock.game.graphics.model.mesh");rock.game.graphics.model.mesh.NormalMesh=function(){rock.super_(this);this.normals=[]};rock.extends_(rock.game.graphics.model.mesh.NormalMesh,rock.game.graphics.model.mesh.Mesh);rock.game.graphics.model.mesh.NormalMesh.prototype.loadFromJSON=function(a){rock.super_method(this,rock.game.graphics.model.mesh.NormalMesh,"loadFromJSON",arguments);this.setNormals(a.normals)};
rock.game.graphics.model.mesh.NormalMesh.prototype.getNormalsAsMesh=function(){var a=new rock.game.graphics.model.mesh.Mesh,b=this.normals,c=b.length,d=this.vertices,e=[],g=[],f,h=0;for(f=0;f<c;f+=3)e.push(d[f],d[f+1],d[f+2]),e.push(d[f]+b[f],d[f+1]+b[f+1],d[f+2]+b[f+2]),g.push(h,h+1),h+=2;a.setVertices(e);a.setIndexes(g);a.computeBBOX();return a};rock.game.graphics.model.mesh.NormalMesh.prototype.getNormals=function(){return this.normals};
rock.game.graphics.model.mesh.NormalMesh.prototype.setNormals=function(a){this.normals=a};rock.namespace("rock.game.graphics.model.mesh");rock.game.graphics.model.mesh.TextureCoordMesh=function(){rock.super_(this);this.textureCoordinates=[]};rock.extends_(rock.game.graphics.model.mesh.TextureCoordMesh,rock.game.graphics.model.mesh.Mesh);rock.game.graphics.model.mesh.TextureCoordMesh.prototype.loadFromJSON=function(a){rock.super_method(this,rock.game.graphics.model.mesh.TextureCoordMesh,"loadFromJSON",arguments);this.setTextureCoordinates(a.textureCoordinates)};
rock.game.graphics.model.mesh.TextureCoordMesh.prototype.getTextureCoordinates=function(){return this.textureCoordinates};rock.game.graphics.model.mesh.TextureCoordMesh.prototype.setTextureCoordinates=function(a){this.textureCoordinates=a};rock.namespace("rock.game.graphics.model.mesh");rock.game.graphics.model.mesh.TextureCoordNormalMesh=function(){rock.super_(this);this.textureCoordinates=[]};rock.extends_(rock.game.graphics.model.mesh.TextureCoordNormalMesh,rock.game.graphics.model.mesh.NormalMesh);rock.game.graphics.model.mesh.TextureCoordNormalMesh.prototype.loadFromJSON=function(a){rock.super_method(this,rock.game.graphics.model.mesh.TextureCoordNormalMesh,"loadFromJSON",arguments);this.setTextureCoordinates(a.textureCoordinates)};
rock.game.graphics.model.mesh.TextureCoordNormalMesh.prototype.getTextureCoordinates=function(){return this.textureCoordinates};rock.game.graphics.model.mesh.TextureCoordNormalMesh.prototype.setTextureCoordinates=function(a){this.textureCoordinates=a};rock.namespace("rock.game.graphics.model.material");rock.game.graphics.model.material.Material=function(){};rock.game.graphics.model.material.Material.prototype.loadFromJSON=rock.abstract_;rock.namespace("rock.game.graphics.model.material");rock.game.graphics.model.material.Texture=function(a){this.image=a};rock.game.graphics.model.material.Texture.prototype.getImage=function(){return this.image};rock.game.graphics.model.material.Texture.prototype.setImage=function(a){this.image=a};rock.game.graphics.model.material.Texture.prototype.clone=function(){var a=new rock.game.graphics.model.Texture;a.setImage(this.image);return a};rock.namespace("rock.game.graphics.model.material");rock.game.graphics.model.material.ColorMaterial=function(){rock.super_(this);this.color=null};rock.extends_(rock.game.graphics.model.material.ColorMaterial,rock.game.graphics.model.material.Material);rock.game.graphics.model.material.ColorMaterial.prototype.loadFromJSON=function(a){a=a.color;var b=null;4==a.length&&(b=a[3]);this.color=new rock.graphics.Color(a[0],a[1],a[2],b)};rock.game.graphics.model.material.ColorMaterial.prototype.getColor=function(){return this.color};
rock.game.graphics.model.material.ColorMaterial.prototype.setColor=function(a){this.color=a};rock.namespace("rock.game.graphics.model.material");rock.game.graphics.model.material.TextureMaterial=function(a){rock.super_(this);this.texture=a};rock.extends_(rock.game.graphics.model.material.TextureMaterial,rock.game.graphics.model.material.Material);rock.game.graphics.model.material.TextureMaterial.prototype.loadFromJSON=function(a,b){var c=b.getTextureImage(a.texture.image);this.texture=new rock.game.graphics.model.material.Texture(c)};
rock.game.graphics.model.material.TextureMaterial.prototype.getTexture=function(){return this.texture};rock.game.graphics.model.material.TextureMaterial.prototype.setTexture=function(a){this.texture=a};rock.namespace("rock.game.graphics.model.material");rock.game.graphics.model.material.PhongMaterial=function(){rock.super_(this);this.ambient=new rock.graphics.Color(0,0,0);this.diffuse=new rock.graphics.Color(0,0,0);this.specular=new rock.graphics.Color(0,0,0);this.alpha=this.shininess=1};rock.extends_(rock.game.graphics.model.material.PhongMaterial,rock.game.graphics.model.material.Material);
rock.game.graphics.model.material.PhongMaterial.prototype.loadFromJSON=function(a){var b=a.phongColor;a=b.ambient;var c=b.diffuse,d=b.specular,e=b.shininess,b=b.alpha;this.setAmbient(255*a[0],255*a[1],255*a[2]);this.setDiffuse(255*c[0],255*c[1],255*c[2]);this.setSpecular(255*d[0],255*d[1],255*d[2]);this.setShininess(e);this.setAlpha(b)};rock.game.graphics.model.material.PhongMaterial.prototype.setAmbient=function(a,b,c){this.ambient.setRed(a);this.ambient.setGreen(b);this.ambient.setBlue(c)};
rock.game.graphics.model.material.PhongMaterial.prototype.getAmbient=function(){return this.ambient};rock.game.graphics.model.material.PhongMaterial.prototype.setDiffuse=function(a,b,c){this.diffuse.setRed(a);this.diffuse.setGreen(b);this.diffuse.setBlue(c)};rock.game.graphics.model.material.PhongMaterial.prototype.getDiffuse=function(){return this.diffuse};rock.game.graphics.model.material.PhongMaterial.prototype.setSpecular=function(a,b,c){this.specular.setRed(a);this.specular.setGreen(b);this.specular.setBlue(c)};
rock.game.graphics.model.material.PhongMaterial.prototype.getSpecular=function(){return this.specular};rock.game.graphics.model.material.PhongMaterial.prototype.getShininess=function(){return this.shininess};rock.game.graphics.model.material.PhongMaterial.prototype.setShininess=function(a){this.shininess=a};rock.game.graphics.model.material.PhongMaterial.prototype.getAlpha=function(){return this.alpha};rock.game.graphics.model.material.PhongMaterial.prototype.setAlpha=function(a){this.alpha=a};
rock.game.graphics.model.material.PhongMaterial.prototype.clone=function(){var a=new rock.game.graphics.model.material.PhongMaterial,b=this.ambient,c=this.diffuse,d=this.ambient;a.setAmbient(b.getRed(),b.getGreen(),b.getBlue());a.setDiffuse(c.getRed(),c.getGreen(),c.getBlue());a.setSpecular(d.getRed(),d.getGreen(),d.getBlue());a.setShininess(this.getShininess());return a};rock.namespace("rock.game.graphics.model.material");rock.game.graphics.model.material.PhongTextureMaterial=function(){rock.super_(this);this.specularTexture=this.diffuseTexture=this.ambientTexture=null};rock.extends_(rock.game.graphics.model.material.PhongTextureMaterial,rock.game.graphics.model.material.PhongMaterial);
rock.game.graphics.model.material.PhongTextureMaterial.prototype.loadFromJSON=function(a,b){rock.super_method(this,rock.game.graphics.model.material.PhongTextureMaterial,"loadFromJSON",arguments);var c=a.phongTexture,d;rock.util.JsUtils.isNullOrUndefined(c.ambient)||(d=b.getTextureImage(c.ambient),this.ambientTexture=new rock.game.graphics.model.material.Texture(d));rock.util.JsUtils.isNullOrUndefined(c.diffuse)||(d=b.getTextureImage(c.diffuse),this.diffuseTexture=new rock.game.graphics.model.material.Texture(d));
rock.util.JsUtils.isNullOrUndefined(c.specular)||(d=b.getTextureImage(c.specular),this.specularTexture=new rock.game.graphics.model.material.Texture(d))};rock.game.graphics.model.material.PhongTextureMaterial.prototype.getAmbientTexture=function(){return this.ambientTexture};rock.game.graphics.model.material.PhongTextureMaterial.prototype.setAmbientTexture=function(a){this.ambientTexture=a};rock.game.graphics.model.material.PhongTextureMaterial.prototype.getDiffuseTexture=function(){return this.diffuseTexture};
rock.game.graphics.model.material.PhongTextureMaterial.prototype.setDiffuseTexture=function(a){this.diffuseTexture=a};rock.game.graphics.model.material.PhongTextureMaterial.prototype.getSpecularTexture=function(){return this.specularTexture};rock.game.graphics.model.material.PhongTextureMaterial.prototype.setSpecularTexture=function(a){this.specularTexture=a};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.BaseModel=function(a){this.type=a};rock.game.graphics.model.BaseModel.prototype.getBBOX=rock.abstract_;rock.game.graphics.model.BaseModel.prototype.getCenter=function(){return this.getBBOX().getCenter()};rock.game.graphics.model.BaseModel.prototype.getType=function(){return this.type};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.Model=function(a){rock.super_(this,arguments);this.material=this.mesh=null};rock.extends_(rock.game.graphics.model.Model,rock.game.graphics.model.BaseModel);rock.game.graphics.model.Model.prototype.loadFromJSON=rock.abstract_;rock.game.graphics.model.Model.prototype.getBBOX=function(){return this.mesh.getBBOX()};rock.game.graphics.model.Model.prototype.getCenter=function(){return this.getBBOX().getCenter()};
rock.game.graphics.model.Model.prototype.getMeshCount=function(){return this.mesh.getIndexes().length};rock.game.graphics.model.Model.prototype.getMesh=function(){return this.mesh};rock.game.graphics.model.Model.prototype.setMesh=function(a){this.mesh=a};rock.game.graphics.model.Model.prototype.getMaterial=function(){return this.material};rock.game.graphics.model.Model.prototype.setMaterial=function(a){this.material=a};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.WireframeColorModel=function(){rock.super_(this,[rock.game.constants.COLOR_MODEL_TYPE])};rock.extends_(rock.game.graphics.model.WireframeColorModel,rock.game.graphics.model.Model);rock.game.graphics.model.WireframeColorModel.prototype.loadFromJSON=function(a){var b=new rock.game.graphics.model.mesh.Mesh;b.loadFromJSON(a.mesh);this.mesh=b;b=rock.game.graphics.model.material.ColorMaterial();b.loadFromJSON(a.color);this.material=b};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.TextureModel=function(){rock.super_(this,[rock.game.constants.TEXTURE_MODEL_TYPE])};rock.extends_(rock.game.graphics.model.TextureModel,rock.game.graphics.model.Model);
rock.game.graphics.model.TextureModel.prototype.loadFromJSON=function(a,b){var c=new rock.game.graphics.model.mesh.TextureCoordMesh;c.loadFromJSON(a.mesh);this.mesh=c;c=new rock.game.graphics.model.material.TextureMaterial;c.loadFromJSON(a.material,b);this.material=c};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.PhongModel=function(){rock.super_(this,[rock.game.constants.PHONG_MODEL_TYPE])};rock.extends_(rock.game.graphics.model.PhongModel,rock.game.graphics.model.Model);rock.game.graphics.model.PhongModel.prototype.loadFromJSON=function(a,b){var c=new rock.game.graphics.model.mesh.NormalMesh;c.loadFromJSON(a.mesh);this.mesh=c;c=new rock.game.graphics.model.material.PhongMaterial;c.loadFromJSON(a.material,b);this.material=c};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.PhongTextureModel=function(){rock.super_(this,[rock.game.constants.PHONG_TEXTURE_MODEL_TYPE])};rock.extends_(rock.game.graphics.model.PhongTextureModel,rock.game.graphics.model.Model);
rock.game.graphics.model.PhongTextureModel.prototype.loadFromJSON=function(a,b){var c=new rock.game.graphics.model.mesh.TextureCoordNormalMesh;c.loadFromJSON(a.mesh);this.mesh=c;c=new rock.game.graphics.model.material.PhongTextureMaterial;c.loadFromJSON(a.material,b);this.material=c};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.GroupModel=function(){rock.super_(this,[rock.game.constants.GROUP_MODEL_TYPE]);this.models=[];this.BBOX_ma=new rock.geometry.BBOX(Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE)};rock.extends_(rock.game.graphics.model.GroupModel,rock.game.graphics.model.BaseModel);
rock.game.graphics.model.GroupModel.prototype.getBBOX=function(){var a=this.BBOX_ma;a.setXMin(Number.MAX_VALUE);a.setXMax(Number.MIN_VALUE);a.setYMin(Number.MAX_VALUE);a.setYMax(Number.MIN_VALUE);a.setZMin(Number.MAX_VALUE);a.setZMax(Number.MIN_VALUE);var b=this.models,c,d;for(c=0;c<b.length;c++)d=b[c].getBBOX(),a.join(d);return a};rock.game.graphics.model.GroupModel.prototype.addModel=function(a){this.models.push(a)};rock.game.graphics.model.GroupModel.prototype.getModels=function(){return this.models};
rock.game.graphics.model.GroupModel.prototype.setMeshModels=function(a){this.meshModels=a};rock.namespace("rock.game.graphics.model");rock.game.graphics.model.JSONModelUtils=function(){};rock.game.graphics.model.JSONModelUtils.createTextureModelGroup=function(a,b){var c=new rock.game.graphics.model.GroupModel,d,e;for(d=0;d<a.length;d++)e=a[d],c.addModel(this.createTextureModel(e,b));return c};rock.game.graphics.model.JSONModelUtils.createTextureModel=function(a,b){var c=new rock.game.graphics.model.TextureModel;c.loadFromJSON(a,b);return c};
rock.game.graphics.model.JSONModelUtils.createPhongModelGroup=function(a){var b=new rock.game.graphics.model.GroupModel,c,d;for(c=0;c<a.length;c++)d=a[c],b.addModel(this.createPhongModel(d));return b};rock.game.graphics.model.JSONModelUtils.createPhongModel=function(a){var b=new rock.game.graphics.model.PhongModel;b.loadFromJSON(a);return b};
rock.game.graphics.model.JSONModelUtils.createPhongTextureModelGroup=function(a,b){var c=new rock.game.graphics.model.GroupModel,d,e;for(d=0;d<a.length;d++)e=a[d],c.addModel(this.createPhongTextureModel(e,b));return c};rock.game.graphics.model.JSONModelUtils.createPhongTextureModel=function(a,b){var c=new rock.game.graphics.model.PhongTextureModel;c.loadFromJSON(a,b);return c};
rock.game.graphics.model.JSONModelUtils.createWireframeModelGroup=function(a){var b=new rock.game.graphics.model.GroupModel,c,d;for(c=0;c<a.length;c++)d=a[c],b.addModel(rock.game.graphics.model.JSONModelUtils.createWireframeColorModel(d));return b};rock.game.graphics.model.JSONModelUtils.createWireframeColorModel=function(a){var b=new rock.game.graphics.model.mesh.Mesh;b.loadFromJSON(a.mesh);return rock.game.graphics.model.JSONModelUtils.createWireframeColorModelFromMesh(b.getAsWireframeMesh())};
rock.game.graphics.model.JSONModelUtils.createWireframeNormalsModelGroup=function(a){var b=new rock.game.graphics.model.GroupModel,c,d;for(c=0;c<a.length;c++)d=a[c],b.addModel(rock.game.graphics.model.JSONModelUtils.createWireframeNormalsColorModel(d));return b};rock.game.graphics.model.JSONModelUtils.createWireframeNormalsColorModel=function(a){var b=new rock.game.graphics.model.mesh.NormalMesh;b.loadFromJSON(a.mesh);return rock.game.graphics.model.JSONModelUtils.createWireframeColorModelFromMesh(b.getNormalsAsMesh())};
rock.game.graphics.model.JSONModelUtils.createWireframeBBOXColorModel=function(a){a=rock.game.graphics.model.mesh.Mesh.createMeshFromBBOX(a);return rock.game.graphics.model.JSONModelUtils.createWireframeColorModelFromMesh(a)};
rock.game.graphics.model.JSONModelUtils.createWireframeColorModelFromMesh=function(a){var b=new rock.game.graphics.model.WireframeColorModel;b.setMesh(a);a=new rock.game.graphics.model.material.ColorMaterial;var c=new rock.graphics.Color(255,0,0);a.setColor(c);b.setMaterial(a);return b};rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.Lighting=function(a){this.type=a};rock.game.graphics.scene.Lighting.prototype.getType=function(){return this.type};rock.game.graphics.scene.Lighting.prototype.setType=function(a){this.type=a};rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.LightArrayLighting=function(a,b){rock.super_(this,[b]);this.maxLights=rock.game.graphics.scene.LightArrayLighting.DEFAULT_MAX_LIGHTS;rock.util.JsUtils.isNullOrUndefined(a)||(this.maxLights=a);this.lights=new rock.js.Array};rock.extends_(rock.game.graphics.scene.LightArrayLighting,rock.game.graphics.scene.Lighting);rock.game.graphics.scene.LightArrayLighting.DEFAULT_MAX_LIGHTS=10;
rock.game.graphics.scene.LightArrayLighting.prototype.getLight=function(a){return this.lights.getValue(a)};rock.game.graphics.scene.LightArrayLighting.prototype.addLight=function(a){this.lights.getLength()>=this.maxLights||this.lights.addValue(a)};rock.game.graphics.scene.LightArrayLighting.prototype.removeLight=function(a){this.lights.removeValue(a)};rock.game.graphics.scene.LightArrayLighting.prototype.clearLights=function(){this.lights.clear()};
rock.game.graphics.scene.LightArrayLighting.prototype.getLightsCount=function(){return this.lights.getLength()};rock.namespace("rock.game.scene");rock.game.graphics.scene.Camera=function(a,b,c,d,e,g,f){this.position=a;this.lookAt=b;this.upVector=c;this.fov=d;this.aspectRatio=e;this.zNear=g;this.zFar=f;this.lookAtViewMatrix=new rock.geometry.Matrix4;this.perspectiveProjectionMatrix=new rock.geometry.Matrix4;this.forward_ma=new rock.geometry.Vector3(0,0,0);this.side_ma=new rock.geometry.Vector3(0,0,0);this.up_ma=new rock.geometry.Vector3(0,0,0)};
rock.game.graphics.scene.Camera.prototype.validValues=function(){return 1>this.zNear||this.zFar<this.zNear||1>this.fov?!1:!0};rock.game.graphics.scene.Camera.prototype.updateMatrices=function(){this.updateLookAtViewMatrix();this.updatePerspectiveProjectionMatrix()};
rock.game.graphics.scene.Camera.prototype.updateLookAtViewMatrix=function(){var a=this.position,b=this.lookAt,c=this.upVector,d=this.lookAtViewMatrix;d.identity();var e=this.forward_ma;e.setX(b.getX()-a.getX());e.setY(b.getY()-a.getY());e.setZ(b.getZ()-a.getZ());e.normalize();b=rock.util.GeometryUtils.crossProduct(e,c,this.side_ma);b.normalize();c=rock.util.GeometryUtils.crossProduct(b,e,this.up_ma);d.setValue(0,0,b.getX());d.setValue(0,1,b.getY());d.setValue(0,2,b.getZ());d.setValue(0,3,0);d.setValue(1,
0,c.getX());d.setValue(1,1,c.getY());d.setValue(1,2,c.getZ());d.setValue(1,3,0);d.setValue(2,0,-e.getX());d.setValue(2,1,-e.getY());d.setValue(2,2,-e.getZ());d.setValue(2,3,0);d.translate(-a.getX(),-a.getY(),-a.getZ())};
rock.game.graphics.scene.Camera.prototype.updatePerspectiveProjectionMatrix=function(){var a=rock.util.GeometryUtils.degToRad(this.fov/2),b=this.zNear,c=this.zFar,a=Math.tan(a)*b,d=-a,e=a*this.aspectRatio,g=-e,f=this.perspectiveProjectionMatrix;f.identity();f.setValue(0,0,2*b/(e-g));f.setValue(1,0,0);f.setValue(2,0,0);f.setValue(3,0,0);f.setValue(0,1,0);f.setValue(1,1,2*b/(a-d));f.setValue(2,1,0);f.setValue(3,1,0);f.setValue(0,2,(e+g)/(e-g));f.setValue(1,2,(a+d)/(a-d));f.setValue(2,2,-(c+b)/(c-b));
f.setValue(3,2,-1);f.setValue(0,3,0);f.setValue(1,3,0);f.setValue(2,3,-(2*c*b)/(c-b));f.setValue(3,3,0)};rock.game.graphics.scene.Camera.prototype.getLookAtViewMatrix=function(){return this.lookAtViewMatrix};rock.game.graphics.scene.Camera.prototype.getPerspectiveProjectionMatrix=function(){return this.perspectiveProjectionMatrix};rock.game.graphics.scene.Camera.prototype.getPosition=function(){return this.position};rock.game.graphics.scene.Camera.prototype.setPosition=function(a){this.position=a};
rock.game.graphics.scene.Camera.prototype.getLookAt=function(){return this.lookAt};rock.game.graphics.scene.Camera.prototype.setLookAt=function(a){this.lookAt=a};rock.game.graphics.scene.Camera.prototype.getUpVector=function(){return this.upVector};rock.game.graphics.scene.Camera.prototype.setUpVector=function(a){this.upVector=a};rock.game.graphics.scene.Camera.prototype.getFov=function(){return this.fov};rock.game.graphics.scene.Camera.prototype.setFov=function(a){this.fov=a};
rock.game.graphics.scene.Camera.prototype.getAspectRatio=function(){return this.aspectRatio};rock.game.graphics.scene.Camera.prototype.setAspectRatio=function(a){this.aspectRatio=a};rock.game.graphics.scene.Camera.prototype.getZNear=function(){return this.zNear};rock.game.graphics.scene.Camera.prototype.setZNear=function(a){this.zNear=a};rock.game.graphics.scene.Camera.prototype.getZFar=function(){return this.zFar};rock.game.graphics.scene.Camera.prototype.setZFar=function(a){this.zFar=a};rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.Representation=function(a,b){this.representationAttendant=a;this.object=b;this.model=null;this.renderables=new rock.js.Array;this.matrix_ma=new rock.geometry.Matrix4;this.updateModel();this.createRenderables()};rock.game.graphics.scene.Representation.prototype.updateModel=rock.abstract_;rock.game.graphics.scene.Representation.prototype.createRenderables=rock.abstract_;rock.game.graphics.scene.Representation.prototype.update=rock.abstract_;
rock.game.graphics.scene.Representation.prototype.getObject=function(){return this.object};rock.game.graphics.scene.Representation.prototype.getModel=function(){return this.model};rock.game.graphics.scene.Representation.prototype.getRenderables=function(){return this.renderables};
rock.game.graphics.scene.Representation.prototype.updateRenderablesModelMatrixFromPosition=function(){var a=this.object.getPosition(),b=this.renderables,c=this.matrix_ma;c.identity();c.translate(a.getX(),a.getY(),a.getZ());for(var d,e=b.getLength(),a=0;a<e;a++)d=b.getValue(0),d=d.getModelMatrix(),d.initFromMatrix(c)};rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.DirectionalLighting=function(a){rock.super_(this,[a,rock.game.constants.DIRECTIONAL_LIGHTING_TYPE])};rock.extends_(rock.game.graphics.scene.DirectionalLighting,rock.game.graphics.scene.LightArrayLighting);rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.PointLighting=function(a){rock.super_(this,[a,rock.game.constants.POINT_LIGHTING_TYPE])};rock.extends_(rock.game.graphics.scene.PointLighting,rock.game.graphics.scene.LightArrayLighting);rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.SpotlightLighting=function(a){rock.super_(this,[a,rock.game.constants.SPOTLIGHT_LIGHTING_TYPE])};rock.extends_(rock.game.graphics.scene.SpotlightLighting,rock.game.graphics.scene.LightArrayLighting);rock.namespace("rock.game.graphics.scene");rock.game.graphics.scene.AffineTransformationRepresentation=function(a,b){rock.super_(this,arguments);this.applyAffineTransformationsFromModelCenter=!1;this.translation=new rock.geometry.Point3(0,0,0);this.rotationMode=rock.game.graphics.scene.AffineTransformationRepresentation.ROTATION_MODE_XYZ;this.rotationZ=this.rotationY=this.rotationX=0;this.scaleZ=this.scaleY=this.scaleX=1};rock.extends_(rock.game.graphics.scene.AffineTransformationRepresentation,rock.game.graphics.scene.Representation);
rock.game.graphics.scene.AffineTransformationRepresentation.ROTATION_MODE_XYZ="ROTATION_MODE_XYZ";rock.game.graphics.scene.AffineTransformationRepresentation.prototype.updateModelView=function(){this.setAffineTransformationValues();this.applyAffineTransformations()};rock.game.graphics.scene.AffineTransformationRepresentation.prototype.setAffineTransformationValues=rock.abstract_;
rock.game.graphics.scene.AffineTransformationRepresentation.prototype.applyAffineTransformations=function(){var a=this.matrix_ma;this.computeModelMatrix(a);var b=this.renderables,c=b.getLength(),d,e;for(d=0;d<c;d++)e=b.getValue(d),e=e.getModelMatrix(),e.initFromMatrix(a)};rock.game.graphics.scene.AffineTransformationRepresentation.prototype.computeModelMatrix=function(a){a.identity();this.applyTranslation(a);this.applyRotation(a);this.applyScale(a);this.moveModelCenterToOrigin(a)};
rock.game.graphics.scene.AffineTransformationRepresentation.prototype.applyTranslation=function(a){var b=this.translation;a.translate(b.getX(),b.getY(),b.getZ())};rock.game.graphics.scene.AffineTransformationRepresentation.prototype.applyRotation=function(a){this.rotationMode==rock.game.graphics.scene.AffineTransformationRepresentation.ROTATION_MODE_XYZ&&(a.rotateX(this.rotationX),a.rotateY(this.rotationY),a.rotateZ(this.rotationZ))};
rock.game.graphics.scene.AffineTransformationRepresentation.prototype.applyScale=function(a){a.scale(this.scaleX,this.scaleY,this.scaleZ)};rock.game.graphics.scene.AffineTransformationRepresentation.prototype.moveModelCenterToOrigin=function(a){if(this.applyAffineTransformationsFromModelCenter){var b=this.model.getCenter();a.translate(-b.getX(),-b.getY(),-b.getZ())}};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.Settable=function(){};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.AdaptableSettable=function(){this.adapter=null};rock.game.graphics.engine.renderer.webgl.programsetter.settable.AdaptableSettable.prototype.getAdapter=function(){return this.adapter};rock.game.graphics.engine.renderer.webgl.programsetter.settable.AdaptableSettable.prototype.setAdapter=function(a){this.adapter=a};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable=function(){rock.super_(this);this.normalMatrix=this.projectionMatrix=this.modelViewMatrix=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable,rock.game.graphics.engine.renderer.webgl.programsetter.settable.Settable);
rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable.prototype.getModelViewMatrix=function(){return this.modelViewMatrix};rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable.prototype.setModelViewMatrix=function(a){this.modelViewMatrix=a};rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable.prototype.getProjectionMatrix=function(){return this.projectionMatrix};
rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable.prototype.setProjectionMatrix=function(a){this.projectionMatrix=a};rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable.prototype.getNormalMatrix=function(){return this.normalMatrix};rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable.prototype.setNormalMatrix=function(a){this.normalMatrix=a};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable=function(){rock.super_(this);this.camera=this.lighting=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable,rock.game.graphics.engine.renderer.webgl.programsetter.settable.Settable);rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable.prototype.getLighting=function(){return this.lighting};
rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable.prototype.setLighting=function(a){this.lighting=a};rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable.prototype.getCamera=function(){return this.camera};rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable.prototype.setCamera=function(a){this.camera=a};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.MeshSettable=function(){rock.super_(this);this.mesh=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.settable.MeshSettable,rock.game.graphics.engine.renderer.webgl.programsetter.settable.AdaptableSettable);rock.game.graphics.engine.renderer.webgl.programsetter.settable.MeshSettable.prototype.getMesh=function(){return this.mesh};
rock.game.graphics.engine.renderer.webgl.programsetter.settable.MeshSettable.prototype.setMesh=function(a){this.mesh=a};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.MaterialSettable=function(){rock.super_(this);this.material=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.settable.MaterialSettable,rock.game.graphics.engine.renderer.webgl.programsetter.settable.AdaptableSettable);rock.game.graphics.engine.renderer.webgl.programsetter.settable.MaterialSettable.prototype.getMaterial=function(){return this.material};
rock.game.graphics.engine.renderer.webgl.programsetter.settable.MaterialSettable.prototype.setMaterial=function(a){this.material=a};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.settable");rock.game.graphics.engine.renderer.webgl.programsetter.settable.ModelSettable=function(){rock.super_(this);this.model=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.settable.ModelSettable,rock.game.graphics.engine.renderer.webgl.programsetter.settable.AdaptableSettable);rock.game.graphics.engine.renderer.webgl.programsetter.settable.ModelSettable.prototype.getModel=function(){return this.model};
rock.game.graphics.engine.renderer.webgl.programsetter.settable.ModelSettable.prototype.setModel=function(a){this.model=a};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter=function(a){this.glContext=a};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter.prototype.build=rock.abstract_;rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter.prototype.release=rock.abstract_;rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter=function(a,b,c,d){rock.super_(this,[a]);this.values=b;this.typeArray=c;this.bufferType=d;this.array=this.buffer=null;a.getApplication().addEventListener(rock.constants.ROCK_EVENT_CONTEXT_RESTORED,rock.createEventHandler(this,this.onContextRestored))};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ARRAY_BUFFER="ARRAY_BUFFER";rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER";rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.onContextRestored=function(){this.restore()};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.restore=function(){this.build()};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.getGlBufferType=function(){var a=this.glContext.getHTMLContext(),b=null;switch(this.bufferType){case rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ARRAY_BUFFER:b=a.ARRAY_BUFFER;break;case rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ELEMENT_ARRAY_BUFFER:b=a.ELEMENT_ARRAY_BUFFER}return b};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.build=function(){var a=this.glContext.getHTMLContext(),b=this.getGlBufferType(),c=a.createBuffer(),d=new this.typeArray(this.values);a.bindBuffer(b,c);a.bufferData(b,d,a.STATIC_DRAW);this.buffer=c;this.array=d;a.bindBuffer(b,null)};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.release=function(){this.glContext.getHTMLContext().deleteBuffer(this.buffer);this.array=null};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.getBuffer=function(){return this.buffer};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.prototype.getArray=function(){return this.array};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter=function(a,b){rock.super_(this,[a]);this.texture=b;this.glTexture=null;a.getApplication().addEventListener(rock.constants.ROCK_EVENT_CONTEXT_RESTORED,rock.createEventHandler(this,this.onContextRestored))};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter.prototype.onContextRestored=function(){this.restore()};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter.prototype.restore=function(){this.build()};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter.prototype.build=function(){var a=this.glContext.getHTMLContext(),b=this.texture.getImage();this.glTexture=rock.util.WebGlUtils.populateTexture(a,b)};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter.prototype.release=function(){var a=this.glContext.getHTMLContext(),b=this.glTexture;null!=b&&(a.deleteTexture(b),this.glTexture=null)};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter.prototype.getGlTexture=function(){return this.glTexture};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter=function(a,b){rock.super_(this,[a]);this.mesh=b;this.indexesAdapter=this.verticesAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter.prototype.build=function(){var a=this.glContext,b=this.mesh,c=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter(a,b.getVertices(),Float32Array,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ARRAY_BUFFER),a=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter(a,b.getIndexes(),Uint16Array,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ELEMENT_ARRAY_BUFFER);
c.build();a.build();this.verticesAdapter=c;this.indexesAdapter=a};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter.prototype.release=function(){this.verticesAdapter.release();this.indexesAdapter.release();this.indexesAdapter=this.verticesAdapter=null};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter.prototype.getMesh=function(){return this.mesh};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter.prototype.getVerticesAdapter=function(){return this.verticesAdapter};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter.prototype.getIndexesAdapter=function(){return this.indexesAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter=function(a,b){rock.super_(this,arguments);this.normalsAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter.prototype.build=function(){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter,"build");var a=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter(this.glContext,this.mesh.getNormals(),Float32Array,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ARRAY_BUFFER);a.build();this.normalsAdapter=
a};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter.prototype.release=function(){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter,"release");this.normalsAdapter.release();this.normalsAdapter=null};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter.prototype.getNormalsAdapter=function(){return this.normalsAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter=function(a,b){rock.super_(this,arguments);this.textureCoordinatesAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter.prototype.build=function(){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter,"build");var a=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter(this.glContext,this.mesh.getTextureCoordinates(),Float32Array,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ARRAY_BUFFER);a.build();
this.textureCoordinatesAdapter=a};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter.prototype.release=function(){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter,"release");this.textureCoordinatesAdapter.release();this.textureCoordinatesAdapter=null};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter.prototype.getTextureCoordinatesAdapter=function(){return this.textureCoordinatesAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter=function(a,b){rock.super_(this,arguments);this.textureCoordinatesAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter.prototype.build=function(){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter,"build");var a=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter(this.glContext,this.mesh.getTextureCoordinates(),Float32Array,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.BufferAdapter.ARRAY_BUFFER);
a.build();this.textureCoordinatesAdapter=a};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter.prototype.release=function(){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter,"release");this.textureCoordinatesAdapter.release();this.textureCoordinatesAdapter=null};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter.prototype.getTextureCoordinatesAdapter=function(){return this.textureCoordinatesAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.MaterialAdapter=function(a,b){rock.super_(this,arguments);this.material=b};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.MaterialAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.MaterialAdapter.prototype.getMaterial=function(){return this.material};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.TextureModelAdapter=function(a,b){rock.super_(this,arguments);this.textureAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.TextureModelAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.MaterialAdapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.TextureModelAdapter.prototype.build=function(){var a=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter(this.glContext,this.material.getTexture());a.build();this.textureAdapter=a};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.TextureModelAdapter.prototype.release=function(){this.textureAdapter.release();this.textureAdapter=null};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.TextureModelAdapter.prototype.getTextureAdapter=function(){return this.textureAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter=function(a,b){rock.super_(this,arguments);this.specularTextureAdapter=this.diffuseTextureAdapter=this.ambientTextureAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.MaterialAdapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter.prototype.build=function(){var a=this.material,b=this.glContext,c;c=a.getAmbientTexture();null!=c&&(c=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter(b,c),c.build(),this.ambientTextureAdapter=c);c=a.getDiffuseTexture();null!=c&&(c=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter(b,c),c.build(),this.diffuseTextureAdapter=c);c=a.getSpecularTexture();
null!=c&&(c=new rock.game.graphics.engine.renderer.webgl.programsetter.adapter.TextureAdapter(b,c),c.build(),this.specularTextureAdapter=c)};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter.prototype.release=function(){var a=this.ambientTextureAdapter;null!=a&&(a.release(),this.ambientTextureAdapter=null);a=this.diffuseTextureAdapter;null!=a&&(a.release(),this.diffuseTextureAdapter=null);a=this.specularTextureAdapter;null!=a&&(a.release(),this.specularTextureAdapter=null)};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter.prototype.getAmbientTextureAdapter=function(){return this.ambientTextureAdapter};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter.prototype.getDiffuseTextureAdapter=function(){return this.diffuseTextureAdapter};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter.prototype.getSpecularTextureAdapter=function(){return this.specularTextureAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter=function(a,b,c,d){rock.super_(this,[a]);this.model=b;this.meshAdapterClass=c;this.materialAdapterClass=d;this.materialAdapter=this.meshAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.Adapter);
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter.prototype.build=function(){var a=this.glContext,b=this.model,c=this.meshAdapterClass,d=null;rock.util.JsUtils.isNullOrUndefined(c)||(d=new c(a,b.getMesh()),d.build(),this.meshAdapter=d);c=this.materialAdapterClass;d=null;rock.util.JsUtils.isNullOrUndefined(c)||(d=new c(a,b.getMaterial()),d.build(),this.materialAdapter=d)};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter.prototype.release=function(){var a=this.meshAdapter;rock.util.JsUtils.isNullOrUndefined(a)||(a.release(),this.meshAdapter=null);a=this.materialAdapter;rock.util.JsUtils.isNullOrUndefined(a)||(a.release(),this.materialAdapter=null)};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter.prototype.getModel=function(){return this.model};
rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter.prototype.getMeshAdapter=function(){return this.meshAdapter};rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter.prototype.getMaterialAdapter=function(){return this.materialAdapter};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.WireframeModelAdapter=function(a,b){rock.super_(this,[a,b,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.MeshAdapter,null])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.WireframeModelAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.TextureModelAdapter=function(a,b){rock.super_(this,[a,b,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordMeshAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.TextureModelAdapter])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.TextureModelAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.PhongModelAdapter=function(a,b){rock.super_(this,[a,b,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.NormalMeshAdapter,null])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.PhongModelAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model");rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.PhongTextureModelAdapter=function(a,b){rock.super_(this,[a,b,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.mesh.TextureCoordNormalMeshAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.material.PhongTextureMaterialAdapter])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.PhongTextureModelAdapter,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.ModelAdapter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter");rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter=function(a){this.glContext=a};rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter.prototype.getAttributeNames=rock.abstract_;rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter.prototype.getUniformNameInPosition=function(a,b){return a.replace("[X]","["+b+"]")};
rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter.prototype.getUniformNames=rock.abstract_;rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter.prototype.getTextureNames=rock.abstract_;rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter.prototype.setValues=rock.abstract_;rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter=function(a){rock.super_(this,arguments)};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter);rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter.prototype.getAttributeNames=function(){return[]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter.prototype.getUniformNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter.prototype.getTextureNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter.prototype.getPointInCorrectSpace=function(a,b,c,d){var e=a,g=null;c||(d?(g=b.getAsMatrix3(),e=g.multiplyByPoint3(a)):e=b.multiplyByPoint3(a));return e};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.NoLightingSetter=function(a){rock.super_(this,arguments)};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.NoLightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.NoLightingSetter.prototype.setValues=function(){};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter=function(a,b,c){this.UNIFORM_LIGHT_COUNT=b+"Count";this.UNIFORM_LIGHT_POSITION=b+"[X].position";this.UNIFORM_LIGHT_AMBIENT=b+"[X].ambient";this.UNIFORM_LIGHT_DIFFUSE=b+"[X].diffuse";this.UNIFORM_LIGHT_SPECULAR=b+"[X].specular";rock.super_(this,[a]);this.maxLights=c};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightingSetter);rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter.prototype.getUniformNames=function(){var a=this.maxLights,b=[this.UNIFORM_LIGHT_COUNT],c;for(c=0;c<a;c++)b=b.concat(this.getCustomUniformNames(c));return b};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter.prototype.getCustomUniformNames=function(a){return this.getLightUniformNames(a)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter.prototype.getLightUniformNames=function(a){var b=[];b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_POSITION,a));b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_AMBIENT,a));b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_DIFFUSE,a));b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_SPECULAR,a));return b};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter.prototype.setValues=function(a,b){var c=b.getLighting(),d=b.getCamera(),e=c.getLightsCount(),g;for(g=0;g<e;g++)this.setCustomLightUniforms(a,c,g,d);this.glContext.getHTMLContext().uniform1i(a.getUniformLocation(this.UNIFORM_LIGHT_COUNT),e)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter.prototype.setCustomLightUniforms=function(a,b,c,d){this.setLightUniforms(a,b,c,d)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter.prototype.setLightUniforms=function(a,b,c,d){var e=this.glContext.getHTMLContext();b=b.getLight(c);d=this.getPointInCorrectSpace(b.getPosition(),d.getLookAtViewMatrix(),b.getIsPositionInCameraSpace(),b.getIsPositionAVector());e.uniform3f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_POSITION,c)),d.getX(),d.getY(),d.getZ());d=b.getAmbient();e.uniform3f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_AMBIENT,
c)),d.getNormalizedRed(),d.getNormalizedGreen(),d.getNormalizedBlue());d=b.getDiffuse();e.uniform3f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_DIFFUSE,c)),d.getNormalizedRed(),d.getNormalizedGreen(),d.getNormalizedBlue());b=b.getSpecular();e.uniform3f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_SPECULAR,c)),b.getNormalizedRed(),b.getNormalizedGreen(),b.getNormalizedBlue())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.DirectionalLightingSetter=function(a,b){rock.super_(this,[a,"u_directionalLights",b])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.DirectionalLightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter=function(a,b,c){this.UNIFORM_LIGHT_CONSTANT_ATTENUATION=b+"[X].constantAttenuation";this.UNIFORM_LIGHT_LINEAR_ATTENUATION=b+"[X].linearAttenuation";this.UNIFORM_LIGHT_EXPONENTIAL_ATTENUATION=b+"[X].exponentialAttenuation";rock.super_(this,arguments)};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.LightArrayLightingSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter.prototype.getCustomUniformNames=function(a){var b=rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter,"getCustomUniformNames",arguments);return b=b.concat(this.getAttenuationLightUniformNames(a))};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter.prototype.getAttenuationLightUniformNames=function(a){var b=[];b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_CONSTANT_ATTENUATION,a));b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_LINEAR_ATTENUATION,a));b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_EXPONENTIAL_ATTENUATION,a));return b};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter.prototype.setCustomLightUniforms=function(a,b,c,d){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter,"setCustomLightUniforms",arguments);this.setAttenuationLightUniforms(a,b,c)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter.prototype.setAttenuationLightUniforms=function(a,b,c){var d=this.glContext.getHTMLContext();b=b.getLight(c);d.uniform1f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_CONSTANT_ATTENUATION,c)),b.getConstantAttenuation());d.uniform1f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_LINEAR_ATTENUATION,c)),b.getLinearAttenuation());d.uniform1f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_EXPONENTIAL_ATTENUATION,
c)),b.getExponentialAttenuation())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.PointLightingSetter=function(a,b){rock.super_(this,[a,"u_pointLights",b])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.PointLightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting");rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter=function(a,b){this.UNIFORM_LIGHT_CONE_ANGLE="u_spotlightLights[X].coneAngle";this.UNIFORM_LIGHT_CONE_DIRECTION="u_spotlightLights[X].coneDirection";rock.super_(this,[a,"u_spotlightLights",b]);this.point3_ma=new rock.geometry.Point3(0,0,0);this.vec3_ma=new rock.geometry.Vector3(0,0,0)};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.AttenuationLightArrayLightingSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter.prototype.getCustomUniformNames=function(a){var b=rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter,"getCustomUniformNames",arguments);return b=b.concat(this.getSpotlightLightUniformNames(a))};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter.prototype.getSpotlightLightUniformNames=function(a){var b=[];b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_CONE_ANGLE,a));b.push(this.getUniformNameInPosition(this.UNIFORM_LIGHT_CONE_DIRECTION,a));return b};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter.prototype.setCustomLightUniforms=function(a,b,c,d){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter,"setCustomLightUniforms",arguments);this.setSpotlightLightUniforms(a,b,c,d)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter.prototype.setSpotlightLightUniforms=function(a,b,c,d){var e=this.glContext.getHTMLContext(),g=b.getLight(c);e.uniform1f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_CONE_ANGLE,c)),g.getConeAngle());var f=this.point3_ma;b=this.vec3_ma;var h=g.getConeDirection();f.setX(h.getX());f.setY(h.getY());f.setZ(h.getZ());d=this.getPointInCorrectSpace(f,d.getLookAtViewMatrix(),g.getIsPositionInCameraSpace(),
!0);b.setX(d.getX());b.setY(d.getY());b.setZ(d.getZ());b.normalize();e.uniform3f(a.getUniformLocation(this.getUniformNameInPosition(this.UNIFORM_LIGHT_CONE_DIRECTION,c)),b.getX(),b.getY(),b.getZ())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter=function(a){this.ATTRIBUTE_VERTEX="a_vertex";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter,rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.getAttributeNames=function(){return[this.ATTRIBUTE_VERTEX]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.getUniformNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.getTextureNames=function(){return[]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.setValues=function(a,b){var c=b.getMesh(),d=b.getAdapter();this.setMeshAttributes(a,c,d)};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.setMeshAttributes=function(a,b,c){rock.util.JsUtils.isNullOrUndefined(c)?this.setAttributesFromMesh(a,b):this.setAttributesFromMeshAdapter(a,c)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.setAttributesFromMesh=function(a,b){var c=b.getVertices(),d=b.getIndexes();a.populateAttribute(this.ATTRIBUTE_VERTEX,new Float32Array(c),3);a.populateIndexes(new Uint16Array(d))};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter.prototype.setAttributesFromMeshAdapter=function(a,b){var c=b.getVerticesAdapter(),d=b.getIndexesAdapter();a.bufferAttribute(this.ATTRIBUTE_VERTEX,c.getBuffer(),3);a.bufferIndexes(d.getBuffer())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter=function(a){this.ATTRIBUTE_NORMAL="a_normal";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter.prototype.getAttributeNames=function(){var a=rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter,"getAttributeNames");a.push(this.ATTRIBUTE_NORMAL);return a};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter.prototype.setAttributesFromMesh=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter,"setAttributesFromMesh",arguments);var c=b.getNormals();a.populateAttribute(this.ATTRIBUTE_NORMAL,new Float32Array(c),3)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter.prototype.setAttributesFromMeshAdapter=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter,"setAttributesFromMeshAdapter",arguments);var c=b.getNormalsAdapter();a.bufferAttribute(this.ATTRIBUTE_NORMAL,c.getBuffer(),3)};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter=function(a){this.ATTRIBUTE_TEXCOORD="a_texCoord";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter.prototype.getAttributeNames=function(){var a=rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter,"getAttributeNames");a.push(this.ATTRIBUTE_TEXCOORD);return a};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter.prototype.setAttributesFromMesh=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter,"setAttributesFromMesh",arguments);var c=b.getTextureCoordinates();a.populateAttribute(this.ATTRIBUTE_TEXCOORD,new Float32Array(c),2)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter.prototype.setAttributesFromMeshAdapter=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter,"setAttributesFromMeshAdapter",arguments);var c=b.getTextureCoordinatesAdapter();a.bufferAttribute(this.ATTRIBUTE_TEXCOORD,c.getBuffer(),2)};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter=function(a){this.ATTRIBUTE_TEXCOORD="a_texCoord";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter.prototype.getAttributeNames=function(){var a=rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter,"getAttributeNames");a.push(this.ATTRIBUTE_TEXCOORD);return a};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter.prototype.setAttributesFromMesh=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter,"setAttributesFromMesh",arguments);var c=b.getTextureCoordinates();a.populateAttribute(this.ATTRIBUTE_TEXCOORD,new Float32Array(c),2)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter.prototype.setAttributesFromMeshAdapter=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter,"setAttributesFromMeshAdapter",arguments);var c=b.getTextureCoordinatesAdapter();a.bufferAttribute(this.ATTRIBUTE_TEXCOORD,c.getBuffer(),2)};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.MaterialSetter=function(a){rock.super_(this,arguments)};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.MaterialSetter,rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter=function(a){this.UNIFORM_COLOR="u_color";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.MaterialSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter.prototype.getAttributeNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter.prototype.getUniformNames=function(){return[this.UNIFORM_COLOR]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter.prototype.getTextureNames=function(){return[]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter.prototype.setValues=function(a,b){var c=b.getMaterial();this.setUniformColor(a,c.getColor())};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter.prototype.setUniformColor=function(a,b){this.glContext.getHTMLContext().uniform3f(a.getUniformLocation(this.UNIFORM_COLOR),b.getNormalizedRed(),b.getNormalizedGreen(),b.getNormalizedBlue())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter=function(a){this.TEXTURE="u_texture";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.MaterialSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.getAttributeNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.getUniformNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.getTextureNames=function(){return[this.TEXTURE]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.setValues=function(a,b){var c=b.getMaterial(),d=b.getAdapter(),e=null;rock.util.JsUtils.isNullOrUndefined(d)||(e=d.getTextureAdapter());this.setTexture(a,c.getTexture(),e)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.setTexture=function(a,b,c){rock.util.JsUtils.isNullOrUndefined(c)?this.setAttributesFromTexture(a,b):this.setAttributesFromTextureAdapter(a,c)};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.setAttributesFromTexture=function(a,b){a.populateTexture(this.TEXTURE,b.getImage())};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter.prototype.setAttributesFromTextureAdapter=function(a,b){a.updateTexture(this.TEXTURE,b.getGlTexture())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter=function(a){this.UNIFORM_MATERIAL_AMBIENT="u_material.ambient";this.UNIFORM_MATERIAL_DIFFUSE="u_material.diffuse";this.UNIFORM_MATERIAL_SPECULAR="u_material.specular";this.UNIFORM_MATERIAL_SHININESS="u_material.shininess";this.UNIFORM_MATERIAL_ALPHA="u_material.alpha";rock.super_(this,[a])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.MaterialSetter);rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter.prototype.getAttributeNames=function(){return[]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter.prototype.getUniformNames=function(){return[this.UNIFORM_MATERIAL_AMBIENT,this.UNIFORM_MATERIAL_DIFFUSE,this.UNIFORM_MATERIAL_SPECULAR,this.UNIFORM_MATERIAL_SHININESS,this.UNIFORM_MATERIAL_ALPHA]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter.prototype.getTextureNames=function(){return[]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter.prototype.setValues=function(a,b){var c=b.getMaterial();this.setUniformMaterial(a,c)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter.prototype.setUniformMaterial=function(a,b){var c=this.glContext.getHTMLContext(),d=b.getAmbient();c.uniform3f(a.getUniformLocation(this.UNIFORM_MATERIAL_AMBIENT),d.getNormalizedRed(),d.getNormalizedGreen(),d.getNormalizedBlue());d=b.getDiffuse();c.uniform3f(a.getUniformLocation(this.UNIFORM_MATERIAL_DIFFUSE),d.getNormalizedRed(),d.getNormalizedGreen(),d.getNormalizedBlue());d=b.getSpecular();c.uniform3f(a.getUniformLocation(this.UNIFORM_MATERIAL_SPECULAR),
d.getNormalizedRed(),d.getNormalizedGreen(),d.getNormalizedBlue());c.uniform1f(a.getUniformLocation(this.UNIFORM_MATERIAL_SHININESS),b.getShininess());c.uniform1f(a.getUniformLocation(this.UNIFORM_MATERIAL_ALPHA),b.getAlpha())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter=function(a){this.TEXTURE_AMBIENT="u_textureAmbient";this.TEXTURE_DIFFUSE="u_textureDiffuse";this.TEXTURE_SPECULAR="u_textureSpecular";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter.prototype.getTextureNames=function(){var a=rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter,"getTextureNames");return a=a.concat([this.TEXTURE_AMBIENT,this.TEXTURE_DIFFUSE,this.TEXTURE_SPECULAR])};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter.prototype.setValues=function(a,b){rock.super_method(this,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter,"setValues",arguments);var c=b.getMaterial(),d=b.getAdapter();rock.util.JsUtils.isNullOrUndefined(d)?this.setAttributesFromMaterial(a,c):this.setAttributesFromAdapter(a,d)};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter.prototype.setAttributesFromMaterial=function(a,b){var c=b.getAmbientTexture(),d=b.getDiffuseTexture(),e=b.getSpecularTexture();null!=c&&a.populateTexture(this.TEXTURE_AMBIENT,c.getImage());null!=d&&a.populateTexture(this.TEXTURE_DIFFUSE,d.getImage());null!=e&&a.populateTexture(this.TEXTURE_SPECULAR,e.getImage())};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter.prototype.setAttributesFromAdapter=function(a,b){var c=b.getAmbientTextureAdapter(),d=b.getDiffuseTextureAdapter(),e=b.getSpecularTextureAdapter();null!=c?a.updateTexture(this.TEXTURE_AMBIENT,c.getGlTexture()):a.updateTexture(this.TEXTURE_AMBIENT,null);null!=d?a.updateTexture(this.TEXTURE_DIFFUSE,d.getGlTexture()):a.updateTexture(this.TEXTURE_DIFFUSE,null);null!=e?a.updateTexture(this.TEXTURE_SPECULAR,
e.getGlTexture()):a.updateTexture(this.TEXTURE_SPECULAR,null)};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter=function(a){this.UNIFORM_MODEL_VIEW_MATRIX="u_modelViewMatrix";this.UNIFORM_PROJECTION_MATRIX="u_projectionMatrix";this.UNIFORM_NORMAL_MATRIX="u_normalMatrix";rock.super_(this,[a])};rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter,rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter);
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter.prototype.getAttributeNames=function(){return[]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter.prototype.getUniformNames=function(){return[this.UNIFORM_MODEL_VIEW_MATRIX,this.UNIFORM_PROJECTION_MATRIX,this.UNIFORM_NORMAL_MATRIX]};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter.prototype.getTextureNames=function(){return[]};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter.prototype.setValues=function(a,b){var c=this.glContext,d=b.getModelViewMatrix(),e=b.getProjectionMatrix(),g=b.getNormalMatrix();c.uniformMatrix4fv(a.getUniformLocation(this.UNIFORM_MODEL_VIEW_MATRIX),c.FALSE,d.getMatrixAsArray());c.uniformMatrix4fv(a.getUniformLocation(this.UNIFORM_PROJECTION_MATRIX),c.FALSE,e.getMatrixAsArray());d=a.getUniformLocation(this.UNIFORM_NORMAL_MATRIX);null!=d&&c.uniformMatrix3fv(d,c.FALSE,
g.getAsMatrix3().getMatrixAsArray())};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter=function(a,b,c){rock.super_(this,[a]);this.meshSetter=b;this.materialSetter=c;this.meshSettable=new rock.game.graphics.engine.renderer.webgl.programsetter.settable.MeshSettable;this.materialSettable=new rock.game.graphics.engine.renderer.webgl.programsetter.settable.MaterialSettable};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter,rock.game.graphics.engine.renderer.webgl.programsetter.ProgramSetter);rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter.prototype.getAttributeNames=function(){var a=[],a=a.concat(this.meshSetter.getAttributeNames());return a=a.concat(this.materialSetter.getAttributeNames())};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter.prototype.getUniformNames=function(){var a=[],a=a.concat(this.meshSetter.getUniformNames());return a=a.concat(this.materialSetter.getUniformNames())};rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter.prototype.getTextureNames=function(){var a=[],a=a.concat(this.meshSetter.getTextureNames());return a=a.concat(this.materialSetter.getTextureNames())};
rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter.prototype.setValues=function(a,b){var c=b.getAdapter(),d=this.meshSettable,e=this.materialSettable,g=b.getModel();d.setMesh(g.getMesh());d.setAdapter(c.getMeshAdapter());e.setMaterial(g.getMaterial());e.setAdapter(c.getMaterialAdapter());this.meshSetter.setValues(a,d);this.materialSetter.setValues(a,e)};rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.WireframeColorModelSetter=function(a){var b=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.MeshSetter(a),c=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.ColorMaterialSetter(a);rock.super_(this,[a,b,c])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.WireframeColorModelSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.TextureModelSetter=function(a){var b=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordMeshSetter(a),c=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.TextureMaterialSetter(a);rock.super_(this,[a,b,c])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.TextureModelSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongModelSetter=function(a){var b=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.NormalMeshSetter(a),c=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongMaterialSetter(a);rock.super_(this,[a,b,c])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongModelSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter);rock.namespace("rock.game.graphics.engine.renderer.webgl.programsetter.setter.model");rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongTextureModelSetter=function(a){var b=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.mesh.TextureCoordNormalMeshSetter(a),c=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.material.PhongTextureMaterialSetter(a);rock.super_(this,[a,b,c])};
rock.extends_(rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongTextureModelSetter,rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.ModelSetter);rock.namespace("rock.game.graphics.engine.renderer");rock.game.graphics.engine.renderer.ModelRenderable=function(){this.modelType=this.model=null;this.modelMatrix=new rock.geometry.Matrix4};rock.game.graphics.engine.renderer.ModelRenderable.prototype.getModel=function(){return this.model};rock.game.graphics.engine.renderer.ModelRenderable.prototype.setModel=function(a){this.model=a};rock.game.graphics.engine.renderer.ModelRenderable.prototype.getModelType=function(){return this.modelType};
rock.game.graphics.engine.renderer.ModelRenderable.prototype.setModelType=function(a){this.modelType=a};rock.game.graphics.engine.renderer.ModelRenderable.prototype.getModelMatrix=function(){return this.modelMatrix};rock.namespace("rock.game.graphics.engine.renderer");rock.game.graphics.engine.renderer.ModelRenderer=function(a,b){this.lightingType=a;this.modelType=b;this.rendererContext=null};rock.game.graphics.engine.renderer.ModelRenderer.prototype.render=rock.abstract_;rock.game.graphics.engine.renderer.ModelRenderer.prototype.setUp=function(){};rock.game.graphics.engine.renderer.ModelRenderer.prototype.tearDown=function(){};rock.game.graphics.engine.renderer.ModelRenderer.prototype.getLightingType=function(){return this.lightingType};
rock.game.graphics.engine.renderer.ModelRenderer.prototype.getModelType=function(){return this.modelType};rock.game.graphics.engine.renderer.ModelRenderer.prototype.getRendererContext=function(){return this.rendererContext};rock.game.graphics.engine.renderer.ModelRenderer.prototype.setRendererContext=function(a){this.rendererContext=a};rock.namespace("rock.game.graphics.engine.renderer");rock.game.graphics.engine.renderer.RendererContext=function(a){this.id=a;this.renderers=[];this.clearColor=new rock.graphics.Color(150,150,150)};rock.game.graphics.engine.renderer.RendererContext.prototype.addRenderer=function(a){a.setRendererContext(this);this.renderers.push(a)};rock.game.graphics.engine.renderer.RendererContext.prototype.setUp=function(){};rock.game.graphics.engine.renderer.RendererContext.prototype.tearDown=function(){};
rock.game.graphics.engine.renderer.RendererContext.prototype.clear=rock.abstract_;rock.game.graphics.engine.renderer.RendererContext.prototype.render=function(a,b,c){var d,e;this.setUp();this.clear();b.updateMatrices();var g=c.getLength();for(d=0;d<g;d++)e=c.getValue(d),this.renderRepresentation(a,b,e);this.tearDown()};
rock.game.graphics.engine.renderer.RendererContext.prototype.renderRepresentation=function(a,b,c){c.update();c=c.getRenderables();var d=c.getLength(),e;for(e=0;e<d;e++)this.renderRenderable(a,b,c.getValue(e))};rock.game.graphics.engine.renderer.RendererContext.prototype.renderRenderable=function(a,b,c){var d=this.getRenderer(a.getType(),c.getModelType());d.setUp();d.render(a,b,c);d.tearDown()};
rock.game.graphics.engine.renderer.RendererContext.prototype.getRenderer=function(a,b){var c=this.renderers,d,e;for(d=0;d<c.length;d++)if(e=c[d],e.getLightingType()==a&&e.getModelType()==b)return e;for(d=0;d<c.length;d++)if(e=c[d],e.getLightingType()==rock.game.constants.NO_LIGHTING_NEEDED_TYPE&&e.getModelType()==b)return e;return null};rock.game.graphics.engine.renderer.RendererContext.prototype.getId=function(){return this.id};
rock.game.graphics.engine.renderer.RendererContext.prototype.getClearColor=function(){return this.clearColor};rock.game.graphics.engine.renderer.RendererContext.prototype.setClearColor=function(a){this.clearColor=a};rock.namespace("rock.game.graphics.engine.renderer.webgl");rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION={MEDIUMP_FLOAT_PRECISION:"precision mediump float; \n",HIGHP_FLOAT_PRECISION:"precision highp float; \n"};rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION=rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.HIGHP_FLOAT_PRECISION;
rock.game.graphics.engine.renderer.webgl.GLSL={VERTEX_SHADER:" "+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" attribute vec3 a_vertex;                                             \n uniform mat4 u_modelViewMatrix;                                      \n uniform mat4 u_projectionMatrix;                                     \n vec4 modelViewVertex;                                                \n void main() {                                                        \n     modelViewVertex = u_modelViewMatrix * vec4(a_vertex, 1.0);       \n     gl_Position = u_projectionMatrix * modelViewVertex;              \n }                                                                    \n",
NORMAL_VERTEX_SHADER:" "+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" attribute vec3 a_vertex;                                             \n attribute vec3 a_normal;                                             \n uniform mat4 u_modelViewMatrix;                                      \n uniform mat4 u_projectionMatrix;                                     \n uniform mat3 u_normalMatrix;                                         \n varying vec4 v_modelViewVertex;                                      \n varying vec3 v_normal;                                               \n void main() {                                                        \n     v_modelViewVertex = u_modelViewMatrix * vec4(a_vertex, 1.0);     \n     v_normal = normalize(u_normalMatrix * a_normal);                 \n     gl_Position = u_projectionMatrix * v_modelViewVertex;            \n }                                                                    \n",
TEXTURE_VERTEX_SHADER:" "+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" attribute vec3 a_vertex;                                             \n attribute vec2 a_texCoord;                                           \n uniform mat4 u_modelViewMatrix;                                      \n uniform mat4 u_projectionMatrix;                                     \n varying vec2 v_texCoord;                                             \n vec4 modelViewVertex;                                                \n void main() {                                                        \n     modelViewVertex = u_modelViewMatrix * vec4(a_vertex, 1.0);       \n     v_texCoord = a_texCoord;                                         \n     gl_Position = u_projectionMatrix * modelViewVertex;              \n }                                                                    \n",
TEXTURE_NORMAL_VERTEX_SHADER:" "+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" attribute vec3 a_vertex;                                                 \n attribute vec3 a_normal;                                                 \n attribute vec2 a_texCoord;                                               \n uniform mat4 u_modelViewMatrix;                                          \n uniform mat4 u_projectionMatrix;                                         \n uniform mat3 u_normalMatrix;                                             \n varying vec4 v_modelViewVertex;                                          \n varying vec3 v_normal;                                                   \n varying vec2 v_texCoord;                                                 \n void main() {                                                            \n     v_modelViewVertex = u_modelViewMatrix * vec4(a_vertex, 1.0);         \n     v_normal = normalize(u_normalMatrix * a_normal);                     \n     v_texCoord = a_texCoord;                                             \n     gl_Position = u_projectionMatrix * v_modelViewVertex;                \n }                                                                        \n",
STRUCT_MATERIAL:" struct Material {                     \n     vec3 ambient;                     \n     vec3 diffuse;                     \n     vec3 specular;                    \n     float shininess;                  \n     float alpha;                      \n };                                    \n",STRUCT_LIGHT:" struct Light {                    \n     vec3 position;                \n     vec3 ambient;                 \n     vec3 diffuse;                 \n     vec3 specular;                \n };                                \n",
STRUCT_ATTENUATION_LIGHT:" struct AttenuationLight {         \n     vec3 position;                \n     vec3 ambient;                 \n     vec3 diffuse;                 \n     vec3 specular;                \n     float constantAttenuation;    \n     float linearAttenuation;      \n     float exponentialAttenuation; \n };                                \n",STRUCT_SPOTLIGHT_LIGHT:" struct SpotlightLight {           \n     vec3 position;                \n     vec3 ambient;                 \n     vec3 diffuse;                 \n     vec3 specular;                \n     float constantAttenuation;    \n     float linearAttenuation;      \n     float exponentialAttenuation; \n     float coneAngle;              \n     vec3 coneDirection;           \n };                                \n",
FUNCTION_CALCULATE_DIRECTIONAL_LIGHT_COLOR:" // Expect normalized normal                                                         \n vec3 calculateDirectionalLightColor(Light light, Material material, vec3 normal, vec3 viewDirection)  {  \n     vec3 lightDirection = normalize(-light.position.xyz);                           \n     vec3 lightReflection = normalize(reflect(lightDirection, normal));              \n     // Calculate coefficients                                                       \n     float diffuseCoefficient = max(0., dot(normal, -lightDirection));               \n     float specularCoefficient = 0.;                                                 \n     // There can't be specular light if there isn't diffuse light                 \n     if (diffuseCoefficient > 0.) {                                                  \n         float reflectionCoefficient = max(0., dot(viewDirection, lightReflection)); \n         if (reflectionCoefficient > 0. && material.shininess > 0.) {                \n             specularCoefficient = pow(reflectionCoefficient, material.shininess);   \n         }                                                                           \n     }                                                                               \n     // Calculate colors                                                             \n     vec3 ambientColor = material.ambient * light.ambient;                           \n     vec3 diffuseColor = material.diffuse * light.diffuse * diffuseCoefficient;      \n     vec3 specularColor = material.specular * light.specular * specularCoefficient;  \n     return vec3(ambientColor + diffuseColor + specularColor);                       \n }                                                                                   \n",
FUNCTION_CALCULATE_POINT_LIGHT_COLOR:" // Expect normalized normal                                                         \n vec3 calculatePointLightColor(AttenuationLight light, Material material, vec3 vertex, vec3 normal)  {  \n     vec3 lightDirection = vertex - light.position.xyz ;                             \n     vec3 viewDirection = normalize(-vertex);                                        \n     float distance = length(lightDirection);                                        \n     lightDirection = normalize(lightDirection);                                     \n     vec3 lightReflection = normalize(reflect(lightDirection, normal));              \n     // Calculate coefficients                                                       \n     float diffuseCoefficient = max(0., dot(normal, -lightDirection));               \n     float specularCoefficient = 0.;                                                 \n     // There can't be specular light if there isn't diffuse light                 \n     if (diffuseCoefficient > 0.) {                                                  \n         float reflectionCoefficient = max(0., dot(viewDirection, lightReflection)); \n         if (reflectionCoefficient > 0. && material.shininess > 0.) {                \n             specularCoefficient = pow(reflectionCoefficient, material.shininess);   \n         }                                                                           \n     }                                                                               \n     // Calculate colors                                                             \n     vec3 ambientColor = material.ambient * light.ambient;                           \n     vec3 diffuseColor = material.diffuse * light.diffuse * diffuseCoefficient;      \n     vec3 specularColor = material.specular * light.specular * specularCoefficient;  \n     vec3 color = (ambientColor + diffuseColor + specularColor);                     \n     // Calculate attenuation                                                        \n     float attenuation = light.constantAttenuation                                   \n                         + light.linearAttenuation * distance                        \n                         + light.exponentialAttenuation * distance * distance;       \n     attenuation = max(0., attenuation);                                             \n     return color / attenuation;                                                     \n }                                                                                   \n",
FUNCTION_CALCULATE_SPOTLIGHT_LIGHT_COLOR:" // Expect normalized normal                                                         \n vec3 calculatePointLightColor(SpotlightLight light, Material material, vec3 vertex, vec3 normal)  {  \n     vec3 lightDirection = vertex - light.position.xyz ;                             \n     vec3 viewDirection = normalize(-vertex);                                        \n     float distance = length(lightDirection);                                        \n     lightDirection = normalize(lightDirection);                                     \n     vec3 lightReflection = normalize(reflect(lightDirection, normal));              \n     float diffuseCoefficient = 0.;                                                  \n     float specularCoefficient = 0.;                                                 \n     vec3 coneDirection = normalize(light.coneDirection);                            \n     float currentConeAngle =  degrees(acos(dot(lightDirection, coneDirection)));    \n     if (currentConeAngle < light.coneAngle) {                                       \n         // Calculate coefficients                                                   \n         diffuseCoefficient = max(0., dot(normal, -lightDirection));                 \n         // There can't be specular light if there isn't diffuse light             \n         if (diffuseCoefficient > 0.) {                                              \n             float reflectionCoefficient = max(0., dot(viewDirection, lightReflection)); \n             if (reflectionCoefficient > 0. && material.shininess > 0.) {                \n                 specularCoefficient = pow(reflectionCoefficient, material.shininess);   \n             }                                                                           \n         }                                                                           \n     }                                                                               \n     // Calculate colors                                                             \n     vec3 ambientColor = material.ambient * light.ambient;                           \n     vec3 diffuseColor = material.diffuse * light.diffuse * diffuseCoefficient;      \n     vec3 specularColor = material.specular * light.specular * specularCoefficient;  \n     vec3 color = (ambientColor + diffuseColor + specularColor);                     \n     // Calculate attenuation                                                        \n     float attenuation = light.constantAttenuation                                   \n                         + light.linearAttenuation * distance                        \n                         + light.exponentialAttenuation * distance * distance;       \n     attenuation = max(0., attenuation);                                             \n     return color / attenuation;                                                     \n }                                                                                   \n"};rock.namespace("rock.game.graphics.engine.renderer");rock.game.graphics.engine.renderer.webgl.ModelRenderable=function(){rock.super_(this);this.modelAdapter=null};rock.extends_(rock.game.graphics.engine.renderer.webgl.ModelRenderable,rock.game.graphics.engine.renderer.ModelRenderable);rock.game.graphics.engine.renderer.webgl.ModelRenderable.prototype.getModelAdapter=function(){return this.modelAdapter};
rock.game.graphics.engine.renderer.webgl.ModelRenderable.prototype.setModelAdapter=function(a){this.modelAdapter=a};rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.ModelRenderer=function(a,b,c,d,e,g,f,h,j,k){rock.super_(this,[a,b]);this.glContext=c;this.matricesSetter=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.MatricesSetter(c.getHTMLContext());this.lightingSetter=f;this.modelSetter=h;this.matricesSettable=new rock.game.graphics.engine.renderer.webgl.programsetter.settable.MatricesSettable;this.lightingSettable=new rock.game.graphics.engine.renderer.webgl.programsetter.settable.LightingSettable;this.modelSettable=
new rock.game.graphics.engine.renderer.webgl.programsetter.settable.ModelSettable;this.drawingMode=d;a=this.getAttributeNames();b=this.getUniformNames();d=this.getTextureNames();this.program=new rock.graphics.engine.renderer.webgl.program.CacheProgram(c,e,g,a,b,d,j,k);this.modelViewMatrix_ma=new rock.geometry.Matrix4;this.normalMatrix_ma=new rock.geometry.Matrix4};rock.extends_(rock.game.graphics.engine.renderer.webgl.ModelRenderer,rock.game.graphics.engine.renderer.ModelRenderer);
rock.game.graphics.engine.renderer.webgl.ModelRenderer.MAX_VERTICES=65535;rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.getAttributeNames=function(){var a=[],a=a.concat(this.matricesSetter.getAttributeNames()),a=a.concat(this.lightingSetter.getAttributeNames());return a=a.concat(this.modelSetter.getAttributeNames())};
rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.getUniformNames=function(){var a=[],a=a.concat(this.matricesSetter.getUniformNames()),a=a.concat(this.lightingSetter.getUniformNames());return a=a.concat(this.modelSetter.getUniformNames())};rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.getTextureNames=function(){var a=[],a=a.concat(this.matricesSetter.getTextureNames()),a=a.concat(this.lightingSetter.getTextureNames());return a=a.concat(this.modelSetter.getTextureNames())};
rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.render=function(a,b,c){var d=this.glContext.getHTMLContext(),e=this.program;e.useProgram();this.setCommonProgramValues(a,b,c);e.enableAttributes();a=c.getModel();c=c.getModelAdapter();this.setProgramValuesModel(a,c);d.drawElements(this.drawingMode,a.getMeshCount(),d.UNSIGNED_SHORT,0);e.disableAttributes();d.bindBuffer(d.ARRAY_BUFFER,null);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)};
rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.setCommonProgramValues=function(a,b,c){this.setProgramValuesMatrices(c,b);this.setProgramValuesLighting(a,b)};
rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.setProgramValuesMatrices=function(a,b){var c=this.matricesSettable,d=b.getLookAtViewMatrix(),e=b.getPerspectiveProjectionMatrix(),g=a.getModelMatrix(),f=this.modelViewMatrix_ma,h=this.normalMatrix_ma;f.initFromMatrix(d);f.multiply(g);h.initFromMatrix(f);h.invert();h.transpose();h.removeTranslation();c.setModelViewMatrix(f);c.setProjectionMatrix(e);c.setNormalMatrix(h);this.matricesSetter.setValues(this.program,c)};
rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.setProgramValuesLighting=function(a,b){var c=this.lightingSettable;c.setLighting(a);c.setCamera(b);this.lightingSetter.setValues(this.program,c)};rock.game.graphics.engine.renderer.webgl.ModelRenderer.prototype.setProgramValuesModel=function(a,b){var c=this.modelSettable;c.setModel(a);c.setAdapter(b);this.modelSetter.setValues(this.program,c)};rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.WireframeColorMaterialModelRenderer=function(a){var b=rock.game.constants.NO_LIGHTING_NEEDED_TYPE,c=rock.game.constants.COLOR_MODEL_TYPE,d=a.getHTMLContext().LINES,e=rock.game.graphics.engine.renderer.webgl.GLSL.VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.WireframeColorMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.NoLightingSetter(a),h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.WireframeColorModelSetter(a);
rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.WireframeColorMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.WireframeColorMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" uniform vec3 u_color;                 \n void main() {                         \n     gl_FragColor = vec4(u_color, 1);  \n }                                     \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.TextureMaterialModelRenderer=function(a){var b=rock.game.constants.NO_LIGHTING_NEEDED_TYPE,c=rock.game.constants.TEXTURE_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.TEXTURE_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.TextureMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.NoLightingSetter(a),h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.TextureModelSetter(a);
rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.TextureMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.TextureMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" uniform sampler2D u_texture;                          \n varying vec2 v_texCoord;                              \n void main() {                                         \n     gl_FragColor = texture2D(u_texture, v_texCoord);  \n }                                                     \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer=function(a){var b=rock.game.constants.DIRECTIONAL_LIGHTING_TYPE,c=rock.game.constants.PHONG_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.NORMAL_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.DirectionalLightingSetter(a,rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer.MAX_LIGHTS),
h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongModelSetter(a);rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer.MAX_LIGHTS=10;
rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" #define MAX_LIGHTS "+rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer.MAX_LIGHTS+" \n"+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_MATERIAL+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_LIGHT+rock.game.graphics.engine.renderer.webgl.GLSL.FUNCTION_CALCULATE_DIRECTIONAL_LIGHT_COLOR+
" uniform Light u_directionalLights[MAX_LIGHTS];                                      \n uniform int u_directionalLightsCount;                                               \n uniform Material u_material;                                                        \n varying vec4 v_modelViewVertex;                                                     \n varying vec3 v_normal;                                                              \n void main() {                                                                       \n     vec3 normal = normalize(v_normal);                                              \n     vec3 viewDirection = normalize(-v_modelViewVertex.xyz);                         \n     vec3 lightColor = vec3(0);                                                      \n     for (int i = 0; i < MAX_LIGHTS; i++) {                                          \n         if (i < u_directionalLightsCount) {                                         \n             lightColor += calculateDirectionalLightColor(u_directionalLights[i], u_material, normal, viewDirection);   \n         }                                                                           \n     }                                                                               \n     gl_FragColor = vec4(lightColor, u_material.alpha);                              \n }                                                                                   \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer=function(a){var b=rock.game.constants.DIRECTIONAL_LIGHTING_TYPE,c=rock.game.constants.PHONG_TEXTURE_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.TEXTURE_NORMAL_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.DirectionalLightingSetter(a,rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS),
h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongTextureModelSetter(a);rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS=10;
rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" #define MAX_LIGHTS "+rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS+" \n"+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_MATERIAL+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_LIGHT+rock.game.graphics.engine.renderer.webgl.GLSL.FUNCTION_CALCULATE_DIRECTIONAL_LIGHT_COLOR+
" uniform Light u_directionalLights[MAX_LIGHTS];                                      \n uniform int u_directionalLightsCount;                                               \n uniform Material u_material;                                                        \n uniform sampler2D u_textureAmbient;                                                 \n uniform sampler2D u_textureDiffuse;                                                 \n uniform sampler2D u_textureSpecular;                                                \n varying vec4 v_modelViewVertex;                                                     \n varying vec3 v_normal;                                                              \n varying vec2 v_texCoord;                                                            \n void main() {                                                                       \n     vec3 normal = normalize(v_normal);                                              \n     vec3 viewDirection = normalize(-v_modelViewVertex.xyz);                         \n     vec3 lightColor = vec3(0);                                                      \n     Material textureMaterial;                                                       \n     textureMaterial.ambient = u_material.ambient * texture2D(u_textureAmbient, v_texCoord).rgb;    \n     textureMaterial.diffuse = u_material.diffuse * texture2D(u_textureDiffuse, v_texCoord).rgb;    \n     textureMaterial.specular = u_material.specular * texture2D(u_textureSpecular, v_texCoord).rgb; \n     textureMaterial.shininess = u_material.shininess;                               \n     for (int i = 0; i < MAX_LIGHTS; i++) {                                          \n         if (i < u_directionalLightsCount) {                                         \n             lightColor += calculateDirectionalLightColor(u_directionalLights[i], textureMaterial, normal, viewDirection);   \n         }                                                                           \n     }                                                                               \n     gl_FragColor = vec4(lightColor, u_material.alpha);                              \n }                                                                                   \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer=function(a){var b=rock.game.constants.POINT_LIGHTING_TYPE,c=rock.game.constants.PHONG_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.NORMAL_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.PointLightingSetter(a,rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer.MAX_LIGHTS),
h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongModelSetter(a);rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer.MAX_LIGHTS=10;
rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" #define MAX_LIGHTS "+rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer.MAX_LIGHTS+" \n"+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_MATERIAL+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_ATTENUATION_LIGHT+rock.game.graphics.engine.renderer.webgl.GLSL.FUNCTION_CALCULATE_POINT_LIGHT_COLOR+
" uniform AttenuationLight u_pointLights[MAX_LIGHTS];                                 \n uniform int u_pointLightsCount;                                                     \n uniform Material u_material;                                                        \n varying vec4 v_modelViewVertex;                                                     \n varying vec3 v_normal;                                                              \n void main() {                                                                       \n     vec3 vertex = v_modelViewVertex.xyz;                                            \n     vec3 normal = normalize(v_normal);                                              \n     vec3 lightColor = vec3(0);                                                      \n     for (int i = 0; i < MAX_LIGHTS; i++) {                                          \n         if (i < u_pointLightsCount) {                                               \n             lightColor += calculatePointLightColor(u_pointLights[i], u_material, vertex, normal);   \n         }                                                                           \n     }                                                                               \n     gl_FragColor = vec4(lightColor, u_material.alpha);                              \n }                                                                                   \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer=function(a){var b=rock.game.constants.POINT_LIGHTING_TYPE,c=rock.game.constants.PHONG_TEXTURE_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.TEXTURE_NORMAL_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.PointLightingSetter(a,rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS),
h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongTextureModelSetter(a);rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS=10;
rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" #define MAX_LIGHTS "+rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS+" \n"+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_MATERIAL+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_ATTENUATION_LIGHT+rock.game.graphics.engine.renderer.webgl.GLSL.FUNCTION_CALCULATE_POINT_LIGHT_COLOR+
" uniform AttenuationLight u_pointLights[MAX_LIGHTS];                                 \n uniform int u_pointLightsCount;                                                     \n uniform Material u_material;                                                        \n uniform sampler2D u_textureAmbient;                                                 \n uniform sampler2D u_textureDiffuse;                                                 \n uniform sampler2D u_textureSpecular;                                                \n varying vec4 v_modelViewVertex;                                                     \n varying vec3 v_normal;                                                              \n varying vec2 v_texCoord;                                                            \n void main() {                                                                       \n     vec3 vertex = v_modelViewVertex.xyz;                                            \n     vec3 normal = normalize(v_normal);                                              \n     vec3 lightColor = vec3(0);                                                      \n     Material textureMaterial;                                                       \n     textureMaterial.ambient = u_material.ambient * texture2D(u_textureAmbient, v_texCoord).rgb;    \n     textureMaterial.diffuse = u_material.diffuse * texture2D(u_textureDiffuse, v_texCoord).rgb;    \n     textureMaterial.specular = u_material.specular * texture2D(u_textureSpecular, v_texCoord).rgb; \n     textureMaterial.shininess = u_material.shininess;                               \n     for (int i = 0; i < MAX_LIGHTS; i++) {                                          \n         if (i < u_pointLightsCount) {                                               \n             lightColor += calculatePointLightColor(u_pointLights[i], textureMaterial, vertex, normal);   \n         }                                                                           \n     }                                                                               \n     gl_FragColor = vec4(lightColor, u_material.alpha);                              \n }                                                                                   \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer=function(a){var b=rock.game.constants.SPOTLIGHT_LIGHTING_TYPE,c=rock.game.constants.PHONG_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.NORMAL_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter(a,rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer.MAX_LIGHTS),
h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongModelSetter(a);rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer.MAX_LIGHTS=10;
rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" #define MAX_LIGHTS "+rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer.MAX_LIGHTS+" \n"+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_MATERIAL+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_SPOTLIGHT_LIGHT+rock.game.graphics.engine.renderer.webgl.GLSL.FUNCTION_CALCULATE_SPOTLIGHT_LIGHT_COLOR+
" uniform SpotlightLight u_spotlightLights[MAX_LIGHTS];                               \n uniform int u_spotlightLightsCount;                                                 \n uniform Material u_material;                                                        \n varying vec4 v_modelViewVertex;                                                     \n varying vec3 v_normal;                                                              \n void main() {                                                                       \n     vec3 vertex = v_modelViewVertex.xyz;                                            \n     vec3 normal = normalize(v_normal);                                              \n     vec3 lightColor = vec3(0);                                                      \n     for (int i = 0; i < MAX_LIGHTS; i++) {                                          \n         if (i < u_spotlightLightsCount) {                                           \n             lightColor += calculatePointLightColor(u_spotlightLights[i], u_material, vertex, normal);   \n         }                                                                           \n     }                                                                               \n     gl_FragColor = vec4(lightColor, u_material.alpha);                              \n }                                                                                   \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer=function(a){var b=rock.game.constants.SPOTLIGHT_LIGHTING_TYPE,c=rock.game.constants.PHONG_TEXTURE_MODEL_TYPE,d=a.getHTMLContext().TRIANGLES,e=rock.game.graphics.engine.renderer.webgl.GLSL.TEXTURE_NORMAL_VERTEX_SHADER,g=rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer.fragmentShaderSrc,f=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.lighting.SpotlightLightingSetter(a,rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS),
h=new rock.game.graphics.engine.renderer.webgl.programsetter.setter.model.PhongTextureModelSetter(a);rock.super_(this,[b,c,a,d,e,g,f,h])};rock.extends_(rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer,rock.game.graphics.engine.renderer.webgl.ModelRenderer);rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS=10;
rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer.fragmentShaderSrc=""+rock.game.graphics.engine.renderer.webgl.GLSL_PRECISION.ROCK_PRECISION+" #define MAX_LIGHTS "+rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer.MAX_LIGHTS+" \n"+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_MATERIAL+rock.game.graphics.engine.renderer.webgl.GLSL.STRUCT_SPOTLIGHT_LIGHT+rock.game.graphics.engine.renderer.webgl.GLSL.FUNCTION_CALCULATE_SPOTLIGHT_LIGHT_COLOR+
" uniform SpotlightLight u_spotlightLights[MAX_LIGHTS];                               \n uniform int u_spotlightLightsCount;                                                 \n uniform Material u_material;                                                        \n uniform sampler2D u_textureAmbient;                                                 \n uniform sampler2D u_textureDiffuse;                                                 \n uniform sampler2D u_textureSpecular;                                                \n varying vec4 v_modelViewVertex;                                                     \n varying vec3 v_normal;                                                              \n varying vec2 v_texCoord;                                                            \n void main() {                                                                       \n     vec3 vertex = v_modelViewVertex.xyz;                                            \n     vec3 normal = normalize(v_normal);                                              \n     vec3 lightColor = vec3(0);                                                      \n     Material textureMaterial;                                                       \n     textureMaterial.ambient = u_material.ambient * texture2D(u_textureAmbient, v_texCoord).rgb;    \n     textureMaterial.diffuse = u_material.diffuse * texture2D(u_textureDiffuse, v_texCoord).rgb;    \n     textureMaterial.specular = u_material.specular * texture2D(u_textureSpecular, v_texCoord).rgb; \n     textureMaterial.shininess = u_material.shininess;                               \n     for (int i = 0; i < MAX_LIGHTS; i++) {                                          \n         if (i < u_spotlightLightsCount) {                                           \n             lightColor += calculatePointLightColor(u_spotlightLights[i], textureMaterial, vertex, normal);   \n         }                                                                           \n     }                                                                               \n     gl_FragColor = vec4(lightColor, u_material.alpha);                              \n }                                                                                   \n";rock.namespace("rock.game.graphics.engine.renderer.webgl");rock.game.graphics.engine.renderer.webgl.RendererContext=function(a,b){rock.super_(this,[a]);this.glContext=b};rock.extends_(rock.game.graphics.engine.renderer.webgl.RendererContext,rock.game.graphics.engine.renderer.RendererContext);
rock.game.graphics.engine.renderer.webgl.RendererContext.prototype.setUp=function(){var a=this.glContext.getHTMLContext();a.enable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK)};
rock.game.graphics.engine.renderer.webgl.RendererContext.prototype.clear=function(){var a=this.glContext.getHTMLContext(),b=this.clearColor;a.clearColor(b.getNormalizedRed(),b.getNormalizedGreen(),b.getNormalizedBlue(),b.getNormalizedAlpha());a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)};rock.namespace("rock.game.graphics.engine.renderer.webgl");
rock.game.graphics.engine.renderer.webgl.RockBasicRendererContext=function(a){rock.super_(this,[rock.game.constants.ROCK_BASIC_RENDERER_CONTEXT_ID,a]);this.addRenderer(new rock.game.graphics.engine.renderer.webgl.WireframeColorMaterialModelRenderer(a));this.addRenderer(new rock.game.graphics.engine.renderer.webgl.TextureMaterialModelRenderer(a));this.addRenderer(new rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongMaterialModelRenderer(a));this.addRenderer(new rock.game.graphics.engine.renderer.webgl.DirectionalLightingPhongTextureMaterialModelRenderer(a));
this.addRenderer(new rock.game.graphics.engine.renderer.webgl.PointLightingPhongMaterialModelRenderer(a));this.addRenderer(new rock.game.graphics.engine.renderer.webgl.PointLightingPhongTextureMaterialModelRenderer(a));this.addRenderer(new rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongMaterialModelRenderer(a));this.addRenderer(new rock.game.graphics.engine.renderer.webgl.SpotlightLightingPhongTextureMaterialModelRenderer(a))};
rock.extends_(rock.game.graphics.engine.renderer.webgl.RockBasicRendererContext,rock.game.graphics.engine.renderer.webgl.RendererContext);rock.namespace("rock.game.graphics.engine");rock.game.graphics.engine.RenderEngine=function(a){this.graphicsEngine=a;this.rendererContexts={};this.currentRendererContext=null;this.renderableConstructors={}};rock.game.graphics.engine.RenderEngine.prototype.addRenderableConstructor=function(a,b){this.renderableConstructors[a]=b};rock.game.graphics.engine.RenderEngine.prototype.addRendererContext=function(a){this.rendererContexts[a.getId()]=a};
rock.game.graphics.engine.RenderEngine.prototype.setActiveRendererContext=function(a){this.currentRendererContext=this.rendererContexts[a]};rock.game.graphics.engine.RenderEngine.prototype.render=function(a,b,c){this.currentRendererContext.render(a,b,c)};rock.game.graphics.engine.RenderEngine.prototype.getGraphicsEngine=function(){return this.graphicsEngine};
rock.game.graphics.engine.RenderEngine.prototype.setClearColor=function(a){var b=this.rendererContexts,c,d;for(c in b)d=b[c],rock.instanceof_(d,rock.game.graphics.engine.renderer.RendererContext)&&d.setClearColor(a)};rock.game.graphics.engine.RenderEngine.prototype.createRenderable=function(a){var b=a.getType(),b=this.renderableConstructors[b];if(rock.util.JsUtils.isNullOrUndefined(b))return null;b=new b;b.setModel(a);b.setModelType(a.getType());return b};rock.namespace("rock.game.graphics.engine.webgl");rock.game.graphics.engine.webgl.RenderEngine=function(a){rock.super_(this,arguments);this.adapterConstructors={}};rock.extends_(rock.game.graphics.engine.webgl.RenderEngine,rock.game.graphics.engine.RenderEngine);rock.game.graphics.engine.webgl.RenderEngine.prototype.addAdapterConstructor=function(a,b){this.adapterConstructors[a]=b};
rock.game.graphics.engine.webgl.RenderEngine.prototype.createAdapter=function(a){var b=this.graphicsEngine.getContext(),c=a.getType(),c=this.adapterConstructors[c];return rock.util.JsUtils.isNullOrUndefined(c)?null:new c(b,a)};rock.namespace("rock.game.graphics.engine.webgl");
rock.game.graphics.engine.webgl.RockBasicRenderEngine=function(a){rock.super_(this,arguments);this.addRenderableConstructor(rock.game.constants.COLOR_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.ModelRenderable);this.addRenderableConstructor(rock.game.constants.TEXTURE_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.ModelRenderable);this.addRenderableConstructor(rock.game.constants.PHONG_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.ModelRenderable);this.addRenderableConstructor(rock.game.constants.PHONG_TEXTURE_MODEL_TYPE,
rock.game.graphics.engine.renderer.webgl.ModelRenderable);this.addAdapterConstructor(rock.game.constants.COLOR_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.WireframeModelAdapter);this.addAdapterConstructor(rock.game.constants.TEXTURE_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.TextureModelAdapter);this.addAdapterConstructor(rock.game.constants.PHONG_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.PhongModelAdapter);
this.addAdapterConstructor(rock.game.constants.PHONG_TEXTURE_MODEL_TYPE,rock.game.graphics.engine.renderer.webgl.programsetter.adapter.model.PhongTextureModelAdapter);var b=new rock.game.graphics.engine.renderer.webgl.RockBasicRendererContext(a.getContext());this.addRendererContext(b);this.setActiveRendererContext(b.getId())};rock.extends_(rock.game.graphics.engine.webgl.RockBasicRenderEngine,rock.game.graphics.engine.webgl.RenderEngine);rock.namespace("rock.game.physics");rock.game.physics.Barrier=function(){};rock.game.physics.Barrier.prototype.intersectWithPoint=rock.abstract_;rock.namespace("rock.game.physics");rock.game.physics.BBOXBarrier=function(a){this.bbox=a};rock.extends_(rock.game.physics.BBOXBarrier,rock.game.physics.Barrier);rock.game.physics.BBOXBarrier.prototype.intersectWithPoint=function(a){return this.bbox.intersectWithPoint(a)};rock.game.physics.BBOXBarrier.prototype.getBBOX=function(){return this.bbox};rock.game.physics.BBOXBarrier.prototype.setBBOX=function(a){this.bbox=a};rock.namespace("rock.game.physics");rock.game.physics.CollisionDetector=function(){this.barriers=new rock.js.Array};rock.game.physics.CollisionDetector.prototype.addBarrier=function(a){this.barriers.addValue(a)};rock.game.physics.CollisionDetector.prototype.intersectWithPoint=function(a){var b=this.barriers,c=b.getLength(),d,e;for(d=0;d<c;d++)if(e=b.getValue(d),e.intersectWithPoint(a))return!0;return!1};rock.namespace("rock.game.universe");rock.game.universe.Object=function(a,b){this.type=a;this.world=b;this.position=new rock.geometry.Point3(0,0,0);this.representation=null};rock.game.universe.Object.prototype.getType=function(){return this.type};rock.game.universe.Object.prototype.getWorld=function(){return this.world};rock.game.universe.Object.prototype.getPosition=function(){return this.position};rock.game.universe.Object.prototype.setPosition=function(a){this.position=a};
rock.game.universe.Object.prototype.getRepresentation=function(){return this.representation};rock.game.universe.Object.prototype.setRepresentation=function(a){this.representation=a};rock.namespace("rock.game.universe");rock.game.universe.World=function(a){this.gameEngine=a};rock.game.universe.World.prototype.getGameEngine=function(){return this.gameEngine};rock.game.universe.World.prototype.runLogic=rock.abstract_;rock.namespace("rock.game.engine");rock.game.engine.RepresentationAttendant=function(a,b){this.renderEngine=a;this.repository=b};rock.game.engine.RepresentationAttendant.prototype.createRepresentation=rock.abstract_;rock.game.engine.RepresentationAttendant.prototype.getRepresentations=rock.abstract_;rock.game.engine.RepresentationAttendant.prototype.getRenderEngine=function(){return this.renderEngine};rock.game.engine.RepresentationAttendant.prototype.getRepository=function(){return this.repository};rock.namespace("rock.game.engine");rock.game.engine.GameState=function(){this.events=new rock.js.Array;this.result=rock.game.engine.GameState.IS_RUNNING};rock.game.engine.GameState.IS_RUNNING=0;rock.game.engine.GameState.FINISH_GAME=1;rock.game.engine.GameState.prototype.clearEvents=function(){this.events.clear()};rock.game.engine.GameState.prototype.getEvents=function(){return this.events};rock.game.engine.GameState.prototype.getResult=function(){return this.result};
rock.game.engine.GameState.prototype.setResult=function(a){this.result=a};rock.namespace("rock.game.engine");rock.game.engine.GameDirector=function(a){this.windowSystem=a};rock.game.engine.GameDirector.prototype.start=rock.abstract_;rock.game.engine.GameDirector.prototype.resume=rock.abstract_;rock.game.engine.GameDirector.prototype.load=rock.abstract_;rock.game.engine.GameDirector.prototype.save=rock.abstract_;rock.game.engine.GameDirector.prototype.handleGameState=rock.abstract_;rock.namespace("rock.game.engine");rock.game.engine.GameEngine=function(a,b){this.window=null;this.renderEngine=a;this.representationAttendant=b;this.world=this.camera=this.lighting=null};rock.game.engine.GameEngine.prototype.createRepresentation=function(a){return this.representationAttendant.createRepresentation(a)};
rock.game.engine.GameEngine.prototype.addListeners=function(){this.window.addEventListener(rock.constants.ROCK_EVENT_MOUSE_DOWN,rock.createEventHandler(this,this.onMouseDown));this.window.addEventListener(rock.constants.ROCK_EVENT_MOUSE_UP,rock.createEventHandler(this,this.onMouseUp));this.window.addEventListener(rock.constants.ROCK_EVENT_CLICK,rock.createEventHandler(this,this.onClick));this.window.addEventListener(rock.constants.ROCK_EVENT_DBLCLICK,rock.createEventHandler(this,this.onDlbClick));
this.window.addEventListener(rock.constants.ROCK_EVENT_MOUSE_MOVE,rock.createEventHandler(this,this.onMouseMove));this.window.addEventListener(rock.constants.ROCK_EVENT_MOUSE_WHEEL,rock.createEventHandler(this,this.onMouseWheel));this.window.addEventListener(rock.constants.ROCK_EVENT_MOUSE_OVER,rock.createEventHandler(this,this.onMouseOver));this.window.addEventListener(rock.constants.ROCK_EVENT_MOUSE_LEAVE,rock.createEventHandler(this,this.onMouseLeave));this.window.addEventListener(rock.constants.ROCK_EVENT_KEY_DOWN,
rock.createEventHandler(this,this.onKeyDown));this.window.addEventListener(rock.constants.ROCK_EVENT_KEY_UP,rock.createEventHandler(this,this.onKeyUp));this.window.addEventListener(rock.constants.ROCK_EVENT_KEY_PRESS,rock.createEventHandler(this,this.onKeyPress));this.window.addEventListener(rock.window.Window.WINDOW_ACTIVATED_EVENT,rock.createEventHandler(this,this.onWindowActivate));this.window.addEventListener(rock.window.Window.WINDOW_DEACTIVATED_EVENT,rock.createEventHandler(this,this.onWindowDeactivate))};
rock.game.engine.GameEngine.prototype.onMouseDown=function(){};rock.game.engine.GameEngine.prototype.onMouseUp=function(){};rock.game.engine.GameEngine.prototype.onClick=function(){};rock.game.engine.GameEngine.prototype.onDlbClick=function(){};rock.game.engine.GameEngine.prototype.onMouseMove=function(){};rock.game.engine.GameEngine.prototype.onMouseWheel=function(){};rock.game.engine.GameEngine.prototype.onMouseOver=function(){};rock.game.engine.GameEngine.prototype.onMouseLeave=function(){};
rock.game.engine.GameEngine.prototype.onKeyDown=function(){};rock.game.engine.GameEngine.prototype.onKeyUp=function(){};rock.game.engine.GameEngine.prototype.onKeyPress=function(){};rock.game.engine.GameEngine.prototype.onWindowActivate=function(){};rock.game.engine.GameEngine.prototype.onWindowDeactivate=function(){};rock.game.engine.GameEngine.prototype.runLogic=rock.abstract_;rock.game.engine.GameEngine.prototype.update=function(){var a=this.runLogic();this.render();return a};
rock.game.engine.GameEngine.prototype.render=function(){var a=this.representationAttendant.getRepresentations(this.world);this.renderEngine.render(this.lighting,this.camera,a)};rock.game.engine.GameEngine.prototype.getWindow=function(){return this.window};rock.game.engine.GameEngine.prototype.setWindow=function(a){this.window=a;this.addListeners()};rock.game.engine.GameEngine.prototype.getLighting=function(){return this.lighting};
rock.game.engine.GameEngine.prototype.setLighting=function(a){this.lighting=a};rock.game.engine.GameEngine.prototype.getCamera=function(){return this.camera};rock.game.engine.GameEngine.prototype.setCamera=function(a){this.camera=a};rock.game.engine.GameEngine.prototype.getWorld=function(){return this.world};rock.game.engine.GameEngine.prototype.setWorld=function(a){this.world=a};rock.namespace("rock.game");rock.game.Repository=function(){this.JSONModels={};this.models={};this.textureImages={};this.adapters={};this.audios={}};rock.game.Repository.prototype.addJSONModel=function(a,b){this.JSONModels[a]=b};rock.game.Repository.prototype.getJSONModel=function(a){return this.getElement([a],this.JSONModels)};rock.game.Repository.prototype.addModel=function(a,b){this.models[a]=b};rock.game.Repository.prototype.getModel=function(a){return this.getElement([a],this.models)};
rock.game.Repository.prototype.addTextureImage=function(a,b){this.textureImages[a]=b};rock.game.Repository.prototype.getTextureImage=function(a){return this.getElement([a],this.textureImages)};rock.game.Repository.prototype.addAdapter=function(a,b){this.adapters[a]=b};rock.game.Repository.prototype.getAdapter=function(a){return this.getElement([a],this.adapters)};rock.game.Repository.prototype.getElement=function(a,b){var c=b[a];return rock.util.JsUtils.isNullOrUndefined(c)?null:c};
rock.game.Repository.prototype.addAudio=function(a,b){this.audios[a]=b};rock.game.Repository.prototype.getAudio=function(a){return this.getElement([a],this.audios)};rock.namespace("rock.game");rock.game.GameWindow=function(a,b){rock.super_(this,[a]);this.gameDirector=b};rock.extends_(rock.game.GameWindow,rock.window.Window);rock.namespace("rock.game");rock.game.GameEngineWindow=function(a,b,c){rock.super_(this,[a,b]);this.gameEngine=c;this.gameEngine.setWindow(this)};rock.extends_(rock.game.GameEngineWindow,rock.game.GameWindow);rock.game.GameEngineWindow.prototype.draw=function(a){var b=this.gameEngine.update();this.drawUI(a);this.gameDirector.handleGameState(b)};rock.game.GameEngineWindow.prototype.start=function(){rock.timer.registerTimerFunction(this,this.redraw,[]);rock.timer.start()};
rock.game.GameEngineWindow.prototype.stop=function(){rock.timer.unregisterTimerFunction(this.redraw);rock.timer.stop()};rock.namespace("rock.game");rock.game.Game=function(a){rock.super_(this,arguments);this.repository=new rock.game.Repository};rock.extends_(rock.game.Game,rock.app.Application);rock.game.Game.prototype.getRepository=function(){return this.repository};rock.game.Game.prototype.setRepository=function(a){this.repository=a};rock.namespace("rock.scene");rock.scene.constants={MODEL_NODE_TYPE:"MODEL_NODE_TYPE"};rock.namespace("rock.scene.graphics.scene");rock.scene.graphics.scene.ModelNodeRepresentation=function(a,b){rock.super_(this,arguments)};rock.extends_(rock.scene.graphics.scene.ModelNodeRepresentation,rock.game.graphics.scene.AffineTransformationRepresentation);rock.scene.graphics.scene.ModelNodeRepresentation.prototype.updateModel=function(){};rock.scene.graphics.scene.ModelNodeRepresentation.prototype.createRenderables=function(){};
rock.scene.graphics.scene.ModelNodeRepresentation.prototype.createRenderablesFromModel=function(a){this.model=a;var b=this.renderables;a=this.getAsModelArray(a);var c=this.representationAttendant.getRenderEngine(),d,e,g;for(d=0;d<a.length;d++)e=a[d],g=c.createRenderable(e),e=c.createAdapter(e),e.build(),g.setModelAdapter(e),b.addValue(g)};
rock.scene.graphics.scene.ModelNodeRepresentation.prototype.releaseRenderables=function(){var a=this.renderables,b=a.getLength(),c,d;for(c=0;c<b;c++)d=a.getValue(c),d=d.getModelAdapter(),null!=d&&d.release();a.clear(!0)};rock.scene.graphics.scene.ModelNodeRepresentation.prototype.getAsModelArray=function(a){var b=null;if(rock.instanceof_(a,rock.game.graphics.model.GroupModel))return a.getModels();b=[];b.push(a);return b};rock.scene.graphics.scene.ModelNodeRepresentation.prototype.update=function(){this.updateModelView()};
rock.scene.graphics.scene.ModelNodeRepresentation.prototype.setAffineTransformationValues=function(){this.setCommonValues();this.setTranslation();this.setRotation();this.setScale()};rock.scene.graphics.scene.ModelNodeRepresentation.prototype.setCommonValues=function(){this.applyAffineTransformationsFromModelCenter=this.object.getApplyAffineTransformationsFromModelCenter()};
rock.scene.graphics.scene.ModelNodeRepresentation.prototype.setTranslation=function(){var a=this.object.getTranslation(),b=this.translation;b.setX(a.getX());b.setY(a.getY());b.setZ(a.getZ())};rock.scene.graphics.scene.ModelNodeRepresentation.prototype.setRotation=function(){var a=this.object;this.rotationX=a.getRotationX();this.rotationY=a.getRotationY();this.rotationZ=a.getRotationZ()};
rock.scene.graphics.scene.ModelNodeRepresentation.prototype.setScale=function(){var a=this.object;this.scaleX=a.getScaleX();this.scaleY=a.getScaleY();this.scaleZ=a.getScaleZ()};rock.namespace("rock.scene.engine");rock.scene.engine.RepresentationAttendant=function(a,b){rock.super_(this,arguments);this.representations_ma=new rock.js.Array};rock.extends_(rock.scene.engine.RepresentationAttendant,rock.game.engine.RepresentationAttendant);rock.scene.engine.RepresentationAttendant.prototype.createRepresentation=function(a){var b=null;switch(a.getType()){case rock.scene.constants.MODEL_NODE_TYPE:b=new rock.scene.graphics.scene.ModelNodeRepresentation(this,a)}return b};
rock.scene.engine.RepresentationAttendant.prototype.getRepresentations=function(a){a=a.getModelNodes();var b=this.representations_ma,c,d;b.clear();for(c=0;c<a.length;c++)d=a[c],b.addValue(d.getRepresentation());return b};rock.namespace("rock.scene.engine");rock.scene.engine.SceneDirector=function(a){rock.super_(this,arguments)};rock.extends_(rock.scene.engine.SceneDirector,rock.game.engine.GameDirector);rock.scene.engine.SceneDirector.prototype.start=function(){};rock.scene.engine.SceneDirector.prototype.resume=function(){};rock.scene.engine.SceneDirector.prototype.load=function(){};rock.scene.engine.SceneDirector.prototype.save=function(){};rock.scene.engine.SceneDirector.prototype.handleGameState=function(){};rock.namespace("rock.scene.engine");rock.scene.engine.SceneEngine=function(a,b){var c=new rock.game.graphics.engine.webgl.RockBasicRenderEngine(a),d=new rock.scene.engine.RepresentationAttendant(c,b);rock.super_(this,[c,d])};rock.extends_(rock.scene.engine.SceneEngine,rock.game.engine.GameEngine);
rock.scene.engine.SceneEngine.prototype.runLogic=function(){var a=this.world;this.lighting=a.getLightingNode().getLighting();this.camera=a.getCameraNode().getCamera();this.renderEngine.setClearColor(a.getBackgroundColor());return null};rock.scene.engine.SceneEngine.prototype.createModelNode=function(a){var b=new rock.scene.node.ModelNode(this.world),c=this.createRepresentation(b);c.createRenderablesFromModel(a);b.setRepresentation(c);return b};
rock.scene.engine.SceneEngine.prototype.createLightingNode=function(a){var b=new rock.scene.node.LightingNode;b.setLighting(a);return b};rock.scene.engine.SceneEngine.prototype.createCameraNode=function(a){var b=new rock.scene.node.CameraNode;b.setCamera(a);return b};rock.scene.engine.SceneEngine.prototype.setRendererContextId=function(a){this.renderEngine.setActiveRendererContext(a)};rock.namespace("rock.scene.node");rock.scene.node.LightingNode=function(){this.lighting=null};rock.scene.node.LightingNode.prototype.getLighting=function(){return this.lighting};rock.scene.node.LightingNode.prototype.setLighting=function(a){this.lighting=a};rock.namespace("rock.scene.node");rock.scene.node.CameraNode=function(){this.camera=null};rock.scene.node.CameraNode.prototype.getCamera=function(){return this.camera};rock.scene.node.CameraNode.prototype.setCamera=function(a){this.camera=a};rock.namespace("rock.scene.node");rock.scene.node.ModelNode=function(a){rock.super_(this,[rock.scene.constants.MODEL_NODE_TYPE,a]);this.applyAffineTransformationsFromModelCenter=!1;this.rotationZ=this.rotationY=this.rotationX=0;this.scaleZ=this.scaleY=this.scaleX=1};rock.extends_(rock.scene.node.ModelNode,rock.game.universe.Object);rock.scene.node.ModelNode.prototype.releaseResources=function(){this.representation.releaseRenderables()};
rock.scene.node.ModelNode.prototype.getApplyAffineTransformationsFromModelCenter=function(){return this.applyAffineTransformationsFromModelCenter};rock.scene.node.ModelNode.prototype.setApplyAffineTransformationsFromModelCenter=function(a){this.applyAffineTransformationsFromModelCenter=a};rock.scene.node.ModelNode.prototype.getTranslation=function(){return this.position};rock.scene.node.ModelNode.prototype.setTranslation=function(a,b,c){var d=this.position;d.setX(a);d.setY(b);d.setZ(c)};
rock.scene.node.ModelNode.prototype.getBBOX=function(){var a;a=this.representation.getModel();var b=a.getBBOX();this.applyAffineTransformationsFromModelCenter&&(a=a.getCenter(),b=b.getTranslatedBBOX(-a.getX(),-a.getY(),-a.getZ()));a=this.position;b=b.getRotatedBBOX(this.rotationX,this.rotationY,this.rotationZ);b=b.getScaledBBOX(this.scaleX,this.scaleY,this.scaleZ);return b=b.getTranslatedBBOX(a.getX(),a.getY(),a.getZ())};rock.scene.node.ModelNode.prototype.getRotationX=function(){return this.rotationX};
rock.scene.node.ModelNode.prototype.setRotationX=function(a){this.rotationX=a};rock.scene.node.ModelNode.prototype.getRotationY=function(){return this.rotationY};rock.scene.node.ModelNode.prototype.setRotationY=function(a){this.rotationY=a};rock.scene.node.ModelNode.prototype.getRotationZ=function(){return this.rotationZ};rock.scene.node.ModelNode.prototype.setRotationZ=function(a){this.rotationZ=a};rock.scene.node.ModelNode.prototype.getScaleX=function(){return this.scaleX};
rock.scene.node.ModelNode.prototype.setScaleX=function(a){this.scaleX=a};rock.scene.node.ModelNode.prototype.getScaleY=function(){return this.scaleY};rock.scene.node.ModelNode.prototype.setScaleY=function(a){this.scaleY=a};rock.scene.node.ModelNode.prototype.getScaleZ=function(){return this.scaleZ};rock.scene.node.ModelNode.prototype.setScaleZ=function(a){this.scaleZ=a};rock.namespace("rock.scene");rock.scene.Scene=function(a){rock.super_(this,arguments);this.cameraNode=this.lightingNode=null;this.modelNodes=[];this.backgroundColor=new rock.graphics.Color(150,150,150)};rock.extends_(rock.scene.Scene,rock.game.universe.World);rock.scene.Scene.prototype.createModelNode=function(a){return this.gameEngine.createModelNode(a)};rock.scene.Scene.prototype.createLightingNode=function(a){return this.gameEngine.createLightingNode(a)};
rock.scene.Scene.prototype.createCameraNode=function(a){return this.gameEngine.createCameraNode(a)};rock.scene.Scene.prototype.setLightingNode=function(a){this.lightingNode=a};rock.scene.Scene.prototype.getLightingNode=function(){return this.lightingNode};rock.scene.Scene.prototype.setCameraNode=function(a){this.cameraNode=a};rock.scene.Scene.prototype.getCameraNode=function(){return this.cameraNode};rock.scene.Scene.prototype.getModelNodes=function(){return this.modelNodes};
rock.scene.Scene.prototype.addModelNode=function(a){this.modelNodes.push(a)};rock.scene.Scene.prototype.removeModelNode=function(a){rock.util.JsUtils.removeByValueFromArray(this.modelNodes,a)};rock.scene.Scene.prototype.setRendererContextId=function(a){this.gameEngine.setRendererContextId(a)};rock.scene.Scene.prototype.getBackgroundColor=function(){return this.backgroundColor};rock.scene.Scene.prototype.setBackgroundColor=function(a){this.backgroundColor=a};rock.namespace("rock.scene");rock.scene.SceneEngineWindow=function(a,b){var c=new rock.scene.Scene(b);b.setWorld(c);c=new rock.scene.engine.SceneDirector(this.windowSystem);rock.super_(this,[a,c,b])};rock.extends_(rock.scene.SceneEngineWindow,rock.game.GameEngineWindow);
